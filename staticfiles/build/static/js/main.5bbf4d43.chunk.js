(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{11:function(e,t,a){e.exports={Row:"AuthForm_Row__2PgqZ",Input:"AuthForm_Input__3ONjR",Header:"AuthForm_Header__3VpYh",Link:"AuthForm_Link__2iPzL",Container:"AuthForm_Container__3WYp7",AuthCol:"AuthForm_AuthCol__1jY3i",Image:"AuthForm_Image__2wfBh"}},12:function(e,t,a){e.exports={Button:"Button_Button__27i9m",Wide:"Button_Wide__2ScDr"}},127:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),n=a(31),o=a.n(n),r=(a(97),a(9)),l=a.n(r),i=a(135),d=a(16),j=a(134),u=a(19),m=a.n(u),b=a(13),h=a(14),x=a.n(h);x.a.defaults.baseURL="/api",x.a.defaults.headers.post["Content-Type"]="multipart/form-data",x.a.defaults.withCredentials=!0;const O=x.a.create(),p=x.a.create();var v=a(15),g=a(87);const f=()=>{localStorage.removeItem("refreshTokenTimestamp")},N=async(e,t)=>{try{let a=new URL(e.next);a=(a.pathname+a.search).replace("/api",""),console.log({requestUrl:a});const{data:s}=await x.a.get(a);t((e=>({...e,next:s.next,results:s.results.reduce(((e,t)=>e.some((e=>e.id===t.id))?e:[...e,t]),e.results)})))}catch(a){console.log(a)}};var w=a(1);const _=Object(s.createContext)(),C=Object(s.createContext)(),y=()=>Object(s.useContext)(_),k=()=>Object(s.useContext)(C),P=e=>{let{children:t}=e;const[a,c]=Object(s.useState)(null),n=Object(v.useHistory)();return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await p.get("dj-rest-auth/user/");console.log("CurrentUserProvider",e),c(e)}catch(e){console.log(e)}})()}),[]),Object(s.useMemo)((()=>{O.interceptors.request.use((async e=>{if(console.log(e),localStorage.getItem("refreshTokenTimestamp")){try{await x.a.post("/dj-rest-auth/token/refresh/")}catch(t){return c((e=>(e&&n.push("/login"),null))),f(),e}return e}}),(e=>Promise.reject(e))),p.interceptors.response.use((e=>e),(async e=>{var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)){try{await x.a.post("/dj-rest-auth/token/refresh/")}catch(e){c((e=>(e&&n.push("/login"),null))),f()}return x()(e.config)}return Promise.reject(e)}))}),[n]),Object(w.jsx)(_.Provider,{value:a,children:Object(w.jsx)(C.Provider,{value:c,children:t})})};var A=a(73),L=a.n(A);var B=e=>{let{src:t,height:a=45,text:s}=e;return Object(w.jsxs)("span",{className:L.a.Username,children:[Object(w.jsx)("img",{className:L.a.Avatar,src:t,height:a,width:a,alt:"user avatar"}),s]})};var I=()=>{const[e,t]=Object(s.useState)(window.innerWidth);return Object(s.useEffect)((()=>{const e=()=>{t(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e<768},S=a(130),F=a(74),R=a.n(F);var T=e=>{let{spinner:t,src:a,message:s}=e;return Object(w.jsxs)("div",{className:"".concat(R.a.Asset),children:[t&&Object(w.jsx)(S.a,{animation:"border",variant:"warning"}),a&&Object(w.jsx)("img",{src:a,alt:s}),s&&Object(w.jsx)("p",{className:"".concat(R.a.ProfileText," mt-4"),children:s})]})},D=a(67),E=a.n(D);const H=Object(s.createContext)(),U=Object(s.createContext)(),G=e=>{let{children:t}=e;const[a,c]=Object(s.useState)(1);return Object(w.jsx)(H.Provider,{value:a,children:Object(w.jsx)(U.Provider,{value:c,children:t})})};var M=e=>{var t,a;let{selectedCategory:c}=e;const[n,o]=Object(s.useState)(""),r=Object(s.useContext)(U);Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/categories/");o(e)}catch(e){console.log(e)}})()}),[]);return Object(w.jsx)("div",{className:"".concat(l.a.Content," ").concat(E.a.Container),children:null!==n&&void 0!==n&&null!==(t=n.results)&&void 0!==t&&t.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{className:E.a.Header,children:"Popular categories"}),null===(a=n.results)||void 0===a?void 0:a.map((e=>Object(w.jsx)(b.b,{to:"/categories/".concat(e.id,"/posts"),className:E.a.CategoryName,onClick:()=>{return t=e.id,r(t),console.log("category_id",t),void console.log("selectedCategory",c);var t},children:e.name},e.id)))]}):Object(w.jsx)(T,{spinner:!0})})};var W=()=>{const[e,t]=Object(s.useState)(!1),a=Object(s.useRef)(null);return Object(s.useEffect)((()=>{const e=e=>{console.log("ref",a),console.log("target",e.target),a.current&&!a.current.contains(e.target)&&t(!1)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}}),[a]),{expanded:e,setExpanded:t,ref:a}};var q=()=>{const e=y(),t=k(),{expanded:a,setExpanded:s,ref:c}=W(),n=I(),o=Object(w.jsx)(b.c,{to:"/posts/create",className:m.a.NavLink,activeClassName:m.a.Active,children:"Post"}),r=Object(w.jsx)(b.c,{exact:!0,to:"/",className:m.a.NavLink,activeClassName:m.a.Active,children:"Home"}),l=Object(w.jsx)(b.c,{to:"/profiles/".concat(null===e||void 0===e?void 0:e.profile_id),className:m.a.NavLink,onClick:()=>{},children:Object(w.jsx)(B,{src:null===e||void 0===e?void 0:e.profile_avatar,text:null===e||void 0===e?void 0:e.username,height:38})}),u=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.c,{to:"/feed",className:"".concat(m.a.NavLink," ").concat(m.a.NavLinkOffset),activeClassName:m.a.Active,children:"Feed"}),Object(w.jsx)(b.c,{to:"/liked",className:"".concat(m.a.NavLink," ").concat(m.a.NavLinkOffset),activeClassName:m.a.Active,children:"Liked"}),Object(w.jsx)(b.c,{to:"/saved",className:"".concat(m.a.NavLink," ").concat(m.a.NavLinkOffset),activeClassName:m.a.Active,children:"Saved posts"}),n&&Object(w.jsx)(M,{className:"text-right"}),Object(w.jsx)(b.c,{to:"/",className:"".concat(m.a.NavLink," ").concat(m.a.NavLinkOffset),onClick:async()=>{try{await x.a.post("/dj-rest-auth/logout/"),t(null),f()}catch(e){console.log(e)}},children:"Log out"})]}),h=Object(w.jsxs)(w.Fragment,{children:[" ",Object(w.jsx)(b.c,{to:"/login",className:m.a.NavLink,activeClassName:m.a.Active,children:"Log in"}),Object(w.jsx)(b.c,{to:"/register",className:m.a.NavLink,activeClassName:m.a.Active,children:"Register"}),n&&Object(w.jsx)(M,{className:"text-right"})]});return Object(w.jsx)(i.a,{className:m.a.NavBar,expand:"md",fixed:"top",bg:"dark",variant:"dark",expanded:a,children:Object(w.jsxs)(d.a,{children:[Object(w.jsxs)(b.c,{to:"/",children:[Object(w.jsx)(i.a.Brand,{children:Object(w.jsx)("img",{src:"data:image/png;base64,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",alt:"logo",height:"47px"})}),Object(w.jsx)(i.a.Brand,{className:"".concat(m.a.Brand," mr-auto text-right"),children:"Birdie"})]}),Object(w.jsx)(j.a,{className:"mr-auto text-right",children:e?o:r}),Object(w.jsx)(j.a,{className:"ml-auto text-left",children:e&&n&&l}),Object(w.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:()=>s(!a),ref:c}),Object(w.jsx)(i.a.Collapse,{id:"basic-navbar-nav",children:Object(w.jsx)(j.a,{className:"ml-auto text-right",children:e?Object(w.jsxs)(w.Fragment,{children:[u,!n&&l]}):h})})]})})},V=a(11),z=a.n(V),Q=a(12),J=a.n(Q),Z=a.p+"static/media/bird.2843c24d.jpg",Y=a(20),X=a(10),K=a(8),$=a(18),ee=a(21),te=a(34);const ae=e=>{const t=Object(v.useHistory)();Object(s.useEffect)((()=>{(async()=>{try{await x.a.post("/dj-rest-auth/token/refresh/"),"loggedIn"===e&&t.push("/")}catch(a){"loggedOut"===e&&t.push("/")}})()}),[t,e])};var se=()=>{var e,t,a,c;ae("loggedIn");const[n,o]=Object(s.useState)({username:"",password1:"",password2:""}),{username:r,password1:i,password2:j}=n,[u,m]=Object(s.useState)({}),h=Object(v.useHistory)(),O=e=>{o({...n,[e.target.name]:e.target.value})};return Object(w.jsxs)(Y.a,{className:z.a.Row,children:[Object(w.jsxs)(X.a,{className:"".concat(z.a.AuthCol," my-auto p-md-2"),md:5,children:[Object(w.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(w.jsx)("h1",{className:z.a.Header,children:"Sign up"}),Object(w.jsxs)(K.a,{onSubmit:async e=>{e.preventDefault();try{await x.a.post("/dj-rest-auth/registration/",n),h.push("/login")}catch(a){var t;m(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(w.jsxs)(K.a.Group,{controlId:"username",children:[Object(w.jsx)(K.a.Label,{className:"d-none",children:"Username"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,type:"text",placeholder:"Username",name:"username",value:r,onChange:O})]}),null===u||void 0===u||null===(e=u.username)||void 0===e?void 0:e.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsxs)(K.a.Group,{controlId:"password1",children:[Object(w.jsx)(K.a.Label,{className:"d-none",children:"Password"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,type:"password",placeholder:"Password",name:"password1",value:i,onChange:O})]}),null===u||void 0===u||null===(t=u.password1)||void 0===t?void 0:t.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsxs)(K.a.Group,{controlId:"password2",children:[Object(w.jsx)(K.a.Label,{className:"d-none",children:"Confirm Password"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,type:"password",placeholder:"Password",name:"password2",value:j,onChange:O})]}),null===u||void 0===u||null===(a=u.password2)||void 0===a?void 0:a.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," ").concat(J.a.Wide),type:"submit",children:"Register"}),null===u||void 0===u||null===(c=u.non_field_errors)||void 0===c?void 0:c.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",className:"mt-3",children:e},t)))]})]}),Object(w.jsx)(d.a,{className:"mt-3 ".concat(l.a.Content),children:Object(w.jsxs)(b.b,{className:z.a.Link,to:"/login",children:["Already have an account? ",Object(w.jsx)("span",{children:"Login"})]})})]}),Object(w.jsx)(X.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(w.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Z})})]})};var ce=function(){var e,t,a;const c=k();ae("loggedIn");const[n,o]=Object(s.useState)({username:"",password:""}),{username:r,password:i}=n,[j,u]=Object(s.useState)({}),m=Object(v.useHistory)(),h=e=>{o({...n,[e.target.name]:e.target.value})};return Object(w.jsxs)(Y.a,{className:z.a.Row,children:[Object(w.jsxs)(X.a,{className:"my-auto p-md-2",md:5,children:[Object(w.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(w.jsx)("h1",{className:z.a.Header,children:"Sign in"}),Object(w.jsxs)(K.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await x.a.post("dj-rest-auth/login/",n);console.log("data",e),c(e.user),console.log("data.user",e.user),(e=>{const t=Object(g.a)(null===e||void 0===e?void 0:e.refresh_token).exp;localStorage.setItem("refreshTokenTimestamp",t)})(e),m.goBack()}catch(a){var t;u(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(w.jsxs)(K.a.Group,{controlId:"username",children:[Object(w.jsx)(K.a.Label,{className:"d-none",children:"Username"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,type:"text",placeholder:"Enter Username",name:"username",value:r,onChange:h})]}),null===j||void 0===j||null===(e=j.username)||void 0===e?void 0:e.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsxs)(K.a.Group,{controlId:"password",children:[Object(w.jsx)(K.a.Label,{className:"d-none",children:"Password"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,type:"password",placeholder:"Password",name:"password",value:i,onChange:h})]}),null===j||void 0===j||null===(t=j.password)||void 0===t?void 0:t.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsx)(ee.a,{type:"submit",className:"".concat(J.a.Button," ").concat(J.a.Wide),children:"Login"}),null===j||void 0===j||null===(a=j.non_field_errors)||void 0===a?void 0:a.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",className:"mt-3",children:e},t)))]})]}),Object(w.jsx)(d.a,{className:"mt-3 ".concat(l.a.Content),children:Object(w.jsxs)(b.b,{className:z.a.Link,to:"/register",children:["Don't have an account? ",Object(w.jsx)("span",{children:"Register now!"})]})})]}),Object(w.jsx)(X.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(w.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Z})})]})},ne=a(75),oe=a.n(ne);var re=()=>Object(w.jsx)(Y.a,{className:z.a.Row,children:Object(w.jsx)(X.a,{className:"my-auto offset-md-2",md:8,children:Object(w.jsxs)(d.a,{className:"".concat(l.a.Content),children:[Object(w.jsx)("h1",{className:"".concat(l.a.Main," ").concat(z.a.Header),children:"This page seems to have flown away"}),Object(w.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(oe.a.NotFound),src:Z}),Object(w.jsx)("h2",{className:oe.a.Subheader,children:"Do you ever feel like a plastic bag"})]})})}),le=a(40),ie=a.n(le),de=a(35);var je=function(){var e,t,a,c;ae("loggedOut");const[n,o]=Object(s.useState)({}),[r,i]=Object(s.useState)(""),[j,u]=Object(s.useState)({content:"",image:"",category:""}),{content:m,image:b,category:h}=j,p=Object(s.useRef)(null),v=Object(de.useHistory)(),g=I();Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/categories/");i(e),console.log(e)}catch(e){console.log(e)}})()}),[]);const f=Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsxs)(K.a.Group,{children:[Object(w.jsx)(K.a.Label,{htmlFor:"category",children:"Category"}),Object(w.jsxs)(K.a.Control,{as:"select","aria-label":"tbd",id:"category",defaultValue:"Category",onChange:e=>{u({...j,category:e.target.value})},children:[Object(w.jsx)("option",{disabled:!0,children:"Category"}),null===(e=r.results)||void 0===e?void 0:e.map((e=>Object(w.jsxs)("option",{value:e.id,children:[e.name,": ",e.description]},e.id)))]})]}),null===(t=n.category)||void 0===t?void 0:t.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t)))]}),N=Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsxs)(K.a.Group,{children:[Object(w.jsx)(K.a.Label,{children:"Content"}),Object(w.jsx)(K.a.Control,{as:"textarea",rows:4,name:"content",placeholder:"Type your post",value:m,onChange:e=>{u({...j,content:e.target.value})}})]}),null===(a=n.content)||void 0===a?void 0:a.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t)))]}),_=Object(w.jsxs)("div",{children:[Object(w.jsxs)(K.a.Group,{children:[b?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("figure",{children:Object(w.jsx)(te.a,{className:z.a.Image,src:b,rounded:!0})}),Object(w.jsx)("div",{className:"mr-auto text-right",children:Object(w.jsx)(K.a.Label,{className:"".concat(J.a.Button," btn"),htmlFor:"image-upload",children:"Change the image"})})]}):Object(w.jsx)(K.a.Label,{className:"".concat(J.a.Button," text-center ").concat(g?ie.a.ButtonRight:J.a.Wide),htmlFor:"image-upload",children:Object(w.jsx)(T,{message:"Click or tap to upload an image"})}),Object(w.jsx)(K.a.File,{id:"image-upload",accept:"image/*",onChange:e=>{console.log(e.target.files.length),e.target.files.length&&(URL.revokeObjectURL(b),u({...j,image:URL.createObjectURL(e.target.files[0])}))},ref:p,hidden:!0})]}),null===(c=n.image)||void 0===c?void 0:c.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t)))]}),C=Object(w.jsxs)("div",{className:"text-right",children:[Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," m-2"),onClick:()=>v.goBack(),children:"Cancel"}),Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," m-2"),type:"submit",children:"Post"})]});return Object(w.jsx)(K.a,{onSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("content",m),0!==p.current.files.length&&t.append("image",p.current.files[0]),t.append("category",h),console.log("formdata",t);try{const{data:e}=await O.post("/posts/",t);console.log(e),v.push("/posts/".concat(e.id))}catch(c){var a,s;if(console.log(c),401!==(null===(a=c.response)||void 0===a?void 0:a.status))o(null===(s=c.response)||void 0===s?void 0:s.data)}},children:Object(w.jsx)(Y.a,{children:g?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(X.a,{className:"p-0 p-md-2",children:Object(w.jsxs)(d.a,{className:l.a.Content,children:[Object(w.jsx)("div",{children:N}),Object(w.jsx)("div",{children:f}),Object(w.jsx)("div",{className:"p-2",children:_}),Object(w.jsx)("div",{children:C})]})})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(X.a,{md:8,className:"p-0 p-md-2",children:Object(w.jsxs)(d.a,{className:l.a.Content,children:[Object(w.jsx)("div",{children:N}),Object(w.jsx)("div",{children:f}),Object(w.jsx)("div",{children:C})]})}),Object(w.jsx)(X.a,{className:"py-2 p-0 p-md-2",md:4,children:Object(w.jsx)(d.a,{className:"".concat(l.a.Content," ").concat(ie.a.Container),children:Object(w.jsx)("div",{className:"p-2",children:_})})})]})})})},ue=a(23),me=a.n(ue),be=a(91),he=a.n(be),xe=a(136),Oe=a(131),pe=a(133),ve=a(132),ge=a(29),fe=a(32),Ne=a.n(fe);const we=c.a.forwardRef(((e,t)=>{let{onClick:a}=e;return Object(w.jsx)("i",{className:"fas fa-ellipsis-v",ref:t,onClick:e=>{e.preventDefault(),a(e)}})})),_e=e=>{let{handleEdit:t,handleDelete:a}=e;return Object(w.jsxs)(ge.a,{className:"ml-auto",drop:"left",children:[Object(w.jsx)(ge.a.Toggle,{as:we}),Object(w.jsxs)(ge.a.Menu,{className:"text-center ".concat(Ne.a.DropdownBackground),popperConfig:{strategy:"fixed"},children:[Object(w.jsx)(ge.a.Item,{className:Ne.a.DropdownItem,onClick:t,"aria-label":"edit",children:Object(w.jsx)("i",{className:"fas fa-edit ".concat(Ne.a.DropdownIcon)})}),Object(w.jsx)(ge.a.Item,{className:Ne.a.DropdownItem,onClick:a,"aria-label":"delete",children:Object(w.jsx)("i",{className:"fas fa-trash-alt ".concat(Ne.a.DropdownIcon)})})]})]})};function Ce(e){let{id:t}=e;const a=Object(v.useHistory)();return Object(w.jsxs)(ge.a,{className:"px-3 m-4 ".concat(Ne.a.Absolute),drop:"left",children:[Object(w.jsx)(ge.a.Toggle,{as:we}),Object(w.jsxs)(ge.a.Menu,{className:"text-center ".concat(Ne.a.DropdownBackground),children:[Object(w.jsxs)(ge.a.Item,{onClick:()=>a.push("/profiles/".concat(t,"/edit")),"aria-label":"edit-profile",children:[Object(w.jsx)("i",{className:"fas fa-edit ".concat(Ne.a.DropdownIcon)})," edit profile"]}),Object(w.jsxs)(ge.a.Item,{onClick:()=>a.push("/profiles/".concat(t,"/edit/username")),"aria-label":"edit-username",children:[Object(w.jsx)("i",{className:"far fa-id-card ".concat(Ne.a.DropdownIcon)}),"Change username"]}),Object(w.jsxs)(ge.a.Item,{onClick:()=>a.push("/profiles/".concat(t,"/edit/password")),"aria-label":"edit-password",children:[Object(w.jsx)("i",{className:"fas fa-key ".concat(Ne.a.DropdownIcon)}),"Change password"]})]})]})}var ye=e=>{const{id:t,owner:a,content:s,modified:c,image:n,profile_id:o,profile_avatar:r,like_id:l,comments_count:i,likes_count:j,category_name:u,saved_id:m,saved_count:h,postPage:x,profilePage:O,setPosts:g,setCurrentPosts:f}=e,N=y(),_=(null===N||void 0===N?void 0:N.username)===a,C=Object(v.useHistory)();return Object(w.jsxs)(xe.a,{className:me.a.Post,children:[Object(w.jsxs)(xe.a.Body,{children:[Object(w.jsxs)(Oe.a,{className:"".concat(me.a.PostHeader," d-flex justify-content-between"),children:[Object(w.jsx)(X.a,{children:Object(w.jsxs)(b.b,{to:"/profiles/".concat(o,"/"),children:[Object(w.jsx)(B,{src:r,height:45}),a]})}),Object(w.jsxs)(X.a,{className:"mt-2 text-right d-flex justify-content-end p-0 pt-1",children:[Object(w.jsx)("span",{children:c}),Object(w.jsx)("span",{className:"ml-3",children:_&&x&&Object(w.jsx)(_e,{handleEdit:()=>{C.push("/posts/".concat(t,"/edit"))},handleDelete:async()=>{try{await p.delete("/posts/".concat(t,"/")),C.goBack()}catch(e){console.log(e)}}})})]})]}),Object(w.jsxs)(b.b,{to:"/posts/".concat(t,"/"),children:[u&&Object(w.jsx)("span",{className:me.a.Category,children:u}),s&&Object(w.jsx)("span",{className:"text-left ".concat(me.a.PostText),children:s}),n&&Object(w.jsx)(xe.a.Img,{className:me.a.PostImage,src:n})]})]}),Object(w.jsx)(xe.a.Body,{children:Object(w.jsx)("div",{children:Object(w.jsx)(d.a,{children:Object(w.jsxs)(Y.a,{className:"justify-content-around text-center",children:[Object(w.jsxs)(X.a,{className:me.a.IconText,children:[_?Object(w.jsx)(pe.a,{placement:"top",overlay:Object(w.jsx)(ve.a,{children:"You can't like your own post!"}),children:Object(w.jsx)("i",{className:"fas fa-heart mt-1"})}):l?Object(w.jsx)("span",{onClick:async()=>{try{await p.delete("/likes/".concat(l,"/")),O?f((e=>({...e,results:e.results.map((e=>e.id===t?{...e,likes_count:e.likes_count-1,like_id:null}:e))}))):g((e=>({...e,results:e.results.map((e=>e.id===t?{...e,likes_count:e.likes_count-1,like_id:null}:e))})))}catch(e){console.log(e)}},children:Object(w.jsx)("i",{className:"far fa-heart mt-1 ".concat(me.a.IconText)})}):N?Object(w.jsx)("span",{onClick:async()=>{try{const{data:e}=await p.post("/likes/",{post:t});O?f((a=>({...a,results:a.results.map((a=>a.id===t?{...a,likes_count:a.likes_count+1,like_id:e.id}:a))}))):g((a=>({...a,results:a.results.map((a=>a.id===t?{...a,likes_count:a.likes_count+1,like_id:e.id}:a))})))}catch(e){console.log(e)}},children:Object(w.jsx)("i",{className:"fas fa-heart mt-1 ".concat(me.a.PostText)})}):Object(w.jsx)(pe.a,{placement:"top",overlay:Object(w.jsx)(ve.a,{children:"Log in to like a post!"}),children:Object(w.jsx)("i",{className:"fas fa-heart mt-1"})}),j]}),Object(w.jsx)(X.a,{className:me.a.IconText,children:Object(w.jsxs)(b.b,{to:"/posts/".concat(t),className:me.a.IconText,children:[Object(w.jsx)("i",{className:"far fa-comments ".concat(me.a.PostText)}),i]})}),Object(w.jsx)(X.a,{children:N&&!_&&Object(w.jsxs)("span",{onClick:null==m?async()=>{try{const{data:e}=await p.post("/saved/",{post:t});O?f((a=>({...a,results:a.results.map((a=>a.id===t?{...a,saved_count:a.saved_count+1,saved_id:e.id}:a))}))):g((a=>({...a,results:a.results.map((a=>a.id===t?{...a,saved_count:a.saved_count+1,saved_id:e.id}:a))})))}catch(e){console.log(e)}}:async()=>{try{await p.delete("/saved/".concat(m,"/")),O?f((e=>({...e,results:e.results.map((e=>e.id===t?{...e,saved_count:e.saved_count-1,saved_id:null}:e))}))):g((e=>({...e,results:e.results.map((e=>e.id===t?{...e,saved_count:e.saved_count-1,saved_id:null}:e))})))}catch(e){console.log(e)}},className:me.a.IconText,children:[Object(w.jsx)("i",{className:null!==m?"fa-brands fa-earlybirds ".concat(me.a.IconText):"fa-solid fa-egg ".concat(me.a.PostText)}),h]})})]})})})})]})},ke=a(92);var Pe=function(e){const{post:t,setPost:a,setComments:c,profile_id:n}=e,[o,r]=Object(s.useState)(""),l=y(),i=I();return Object(w.jsxs)(K.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await p.post("/comments/",{content:o,post:t});c((t=>({...t,results:[e,...t.results]}))),a((e=>({results:[{...e.results[0],comments_count:e.results[0].comments_count+1}]}))),r("")}catch(s){console.log(s)}},children:[Object(w.jsx)(K.a.Group,{children:Object(w.jsxs)(ke.a,{children:[Object(w.jsx)(b.b,{to:"/profiles/".concat(n),children:Object(w.jsx)(B,{src:null===l||void 0===l?void 0:l.profile_avatar,text:null===l||void 0===l?void 0:l.username,height:i?35:40})}),Object(w.jsx)(K.a.Control,{as:"textarea",className:"ml-2 ml-md-3",placeholder:"Type comment...",rows:i?4:2,value:o,onChange:e=>{r(e.target.value)}})]})}),Object(w.jsx)("button",{className:"".concat(J.a.Button," d-block ml-auto"),disabled:!o.trim(),type:"submit",children:"Comment"})]})},Ae=a(76),Le=a.n(Ae);var Be=function(e){const{id:t,content:a,setShowEditForm:c,setComments:n}=e,[o,r]=Object(s.useState)(a);return Object(w.jsxs)(K.a,{onSubmit:async e=>{e.preventDefault();try{await p.put("/comments/".concat(t,"/"),{content:o.trim()}),n((e=>({...e,results:e.results.map((e=>e.id===t?{...e,content:o.trim(),modified:"now"}:e))}))),c(!1)}catch(a){console.log(a)}},children:[Object(w.jsx)(K.a.Group,{children:Object(w.jsx)(K.a.Control,{as:"textarea",value:o,onChange:e=>{r(e.target.value)},rows:2})}),Object(w.jsxs)("div",{className:"text-right",children:[Object(w.jsx)("button",{className:"".concat(J.a.Button," mr-1"),onClick:()=>c(!1),type:"button",children:"Cancel"}),Object(w.jsx)("button",{className:J.a.Button,disabled:!a.trim(),type:"submit",children:"Update"})]})]})};var Ie=e=>{const{profile_id:t,profile_avatar:a,owner:c,modified:n,content:o,id:r,setPost:l,setComments:i}=e,[d,j]=Object(s.useState)(!1),u=y(),m=(null===u||void 0===u?void 0:u.username)===c,b=I();return Object(w.jsx)("div",{className:"mt-2",children:Object(w.jsxs)(Oe.a,{children:[Object(w.jsx)(de.Link,{to:"/profiles/".concat(t),children:Object(w.jsx)(B,{src:a,height:b?35:40})}),Object(w.jsxs)(Oe.a.Body,{children:[Object(w.jsx)("span",{className:Le.a.Commenter,children:c}),Object(w.jsx)("span",{className:Le.a.ModifiedDate,children:n}),d?Object(w.jsx)(Be,{id:r,profile_id:t,content:o,setComments:i,setShowEditForm:j}):Object(w.jsx)("p",{children:o})]}),m&&!d&&Object(w.jsx)(_e,{handleEdit:()=>j(!0),handleDelete:async()=>{try{await p.delete("/comments/".concat(r,"/")),l((e=>({results:[{...e.results[0],comments_count:e.results[0].comments_count-1}]}))),i((e=>({...e,results:e.results.filter((e=>e.id!==r))})))}catch(e){console.log(e)}}})]})})},Se=a(77),Fe=a.n(Se);var Re=()=>{const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)(""),[n,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/advertisements/");t(e),o(!0)}catch(e){console.log(e)}})()}),[]),Object(s.useEffect)((()=>{var t;if(n&&null!==e&&void 0!==e&&e.results&&(null===e||void 0===e||null===(t=e.results)||void 0===t?void 0:t.length)>0){const t=Math.floor(Math.random()*e.results.length);c(e.results[t])}}),[e,n]),Object(s.useEffect)((()=>{}),[a]),Object(w.jsx)("div",{className:"".concat(l.a.Content),children:a&&n?Object(w.jsxs)("div",{children:[Object(w.jsx)(te.a,{className:Fe.a.AddImage,src:null===a||void 0===a?void 0:a.image,alt:null===a||void 0===a?void 0:a.alt}),Object(w.jsx)("p",{className:"".concat(Fe.a.AddText," text-center mt-5"),children:null===a||void 0===a?void 0:a.description})]}):Object(w.jsx)(T,{spinner:!0})})};var Te=function(){const{id:e}=Object(de.useParams)(),[t,a]=Object(s.useState)({results:[]}),c=y(),[n,o]=Object(s.useState)({results:[]}),r=I();return Object(s.useEffect)((()=>{(async()=>{try{const[{data:t},{data:s}]=await Promise.all([O.get("/posts/".concat(e,"/")),O.get("/comments/?post=".concat(e))]);a({results:[t]}),o(s)}catch(t){console.log(t)}})()}),[e]),Object(w.jsxs)(Y.a,{className:"mt-2",children:[Object(w.jsxs)(X.a,{className:"py-2 p-md-1",md:8,children:[Object(w.jsx)(ye,{...t.results[0],setPosts:a,postPage:!0}),Object(w.jsxs)(d.a,{className:"".concat(l.a.Content," ").concat(me.a.PostText," ").concat(he.a.CommentFormWidth),children:[c?Object(w.jsx)(Pe,{profile_id:c.profile_id,post:e,setPost:a,setComments:o}):n.results.length?"Comments":null,n.results.length?n.results.map((e=>Object(w.jsx)(Ie,{...e,setPost:a,setComments:o},e.id))):c?Object(w.jsx)("span",{children:"No comments yet, be the first to comment."}):Object(w.jsx)("span",{children:"No comments...yet. Log in to comment."})]})]}),!r&&Object(w.jsxs)(X.a,{md:4,className:"p-md-2",children:[Object(w.jsx)(M,{}),Object(w.jsx)(Re,{})]})]})},De=a(63);var Ee=function(e){let{message:t,filter:a="",selectedCategory:c=""}=e;const[n,o]=Object(s.useState)({results:[]}),[r,i]=Object(s.useState)(!1),{pathname:j}=Object(de.useLocation)(),u=y(),m=I();return Object(s.useEffect)((()=>{i(!1),(async()=>{try{if(null==u){const{data:e}=await x.a.get("/posts/?".concat(a));o(e)}else{const{data:e}=await O.get("/posts/?".concat(a));o(e)}i(!0)}catch(e){console.log(e)}})()}),[a,j,u]),Object(w.jsxs)(Y.a,{className:"mt-2",children:[Object(w.jsx)(X.a,{className:"py-2 p-md-1",md:8,children:r?Object(w.jsx)(w.Fragment,{children:n.results.length?Object(w.jsx)(De.a,{children:n.results.map((e=>Object(w.jsx)(ye,{...e,setPosts:o},e.id))),dataLength:n.results.length,loader:Object(w.jsx)(T,{spinner:!0}),hasMore:!!n.next,next:()=>N(n,o)}):Object(w.jsx)(d.a,{className:l.a.Content,children:Object(w.jsx)(T,{message:t})})}):Object(w.jsx)(d.a,{className:l.a.Content,children:Object(w.jsx)(T,{spinner:!0})})}),!m&&Object(w.jsxs)(X.a,{md:4,className:"p-md-2",children:[Object(w.jsx)(M,{selectedCategory:c}),Object(w.jsx)(Re,{})]})]})};var He=function(){var e,t,a,c;const[n,o]=Object(s.useState)({}),[r,i]=Object(s.useState)(""),[j,u]=Object(s.useState)({content:"",image:"",category:""}),{content:m,image:b,category:h}=j,p=Object(s.useRef)(null),g=Object(v.useHistory)(),{id:f}=Object(de.useParams)(),N=I();Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/categories/");i(e),console.log(e)}catch(e){console.log(e)}})()}),[]),Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await O.get("/posts/".concat(f,"/")),{content:t,image:a,category:s,is_owner:c}=e;console.log(e),c?u({content:t,image:a,category:s}):g.push("/")}catch(e){}})()}),[g,f]);const _=Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsxs)(K.a.Group,{children:[Object(w.jsx)(K.a.Label,{htmlFor:"category",children:"Category"}),Object(w.jsxs)(K.a.Control,{as:"select","aria-label":"tbd",id:"category",onChange:e=>{u({...j,category:e.target.value})},children:[Object(w.jsx)("option",{disabled:!0,children:"Category"}),null===(e=r.results)||void 0===e?void 0:e.map((e=>Object(w.jsxs)("option",{value:e.id,children:[e.name,": ",e.description]},e.id)))]})]}),null===(t=n.category)||void 0===t?void 0:t.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t)))]}),C=Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsxs)(K.a.Group,{children:[Object(w.jsx)(K.a.Label,{children:"Content"}),Object(w.jsx)(K.a.Control,{as:"textarea",rows:4,name:"content",placeholder:"Type your post",value:m,onChange:e=>{u({...j,content:e.target.value})}})]}),null===(a=n.content)||void 0===a?void 0:a.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t)))]}),y=Object(w.jsxs)("div",{children:[Object(w.jsxs)(K.a.Group,{children:[b?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("figure",{children:Object(w.jsx)(te.a,{className:z.a.Image,src:b,rounded:!0})}),Object(w.jsx)("div",{className:"mr-auto text-right",children:Object(w.jsx)(K.a.Label,{className:"".concat(J.a.Button," btn"),htmlFor:"image-upload",children:"Change the image"})})]}):Object(w.jsx)(K.a.Label,{className:"".concat(J.a.Button," text-center ").concat(N?ie.a.ButtonRight:J.a.Wide),htmlFor:"image-upload",children:Object(w.jsx)(T,{message:"Click or tap to upload an image"})}),Object(w.jsx)(K.a.File,{id:"image-upload",accept:"image/*",onChange:e=>{console.log(e.target.files.length),e.target.files.length&&(URL.revokeObjectURL(b),u({...j,image:URL.createObjectURL(e.target.files[0])}))},ref:p,hidden:!0})]}),null===(c=n.image)||void 0===c?void 0:c.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t)))]}),k=Object(w.jsxs)("div",{className:"text-right",children:[Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," m-2"),onClick:()=>g.goBack(),children:"Cancel"}),Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," m-2"),type:"submit",children:"Update"})]});return Object(w.jsx)(K.a,{onSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("content",m),0!==p.current.files.length&&t.append("image",p.current.files[0]),t.append("category",h),console.log("formdata",t);try{const{data:e}=await O.put("/posts/".concat(f,"/"),t);console.log(e),g.push("/posts/".concat(e.id))}catch(c){var a,s;if(console.log(c),401!==(null===(a=c.response)||void 0===a?void 0:a.status))o(null===(s=c.response)||void 0===s?void 0:s.data)}},children:Object(w.jsx)(Y.a,{children:N?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(X.a,{className:"p-0 p-md-2",children:Object(w.jsxs)(d.a,{className:l.a.Content,children:[Object(w.jsx)("div",{children:C}),Object(w.jsx)("div",{children:_}),Object(w.jsx)("div",{className:"p-2",children:y}),Object(w.jsx)("div",{children:k})]})})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(X.a,{md:8,className:"p-0 p-md-2",children:Object(w.jsxs)(d.a,{className:l.a.Content,children:[Object(w.jsx)("div",{children:C}),Object(w.jsx)("div",{children:_}),Object(w.jsx)("div",{children:k})]})}),Object(w.jsx)(X.a,{className:"py-2 p-0 p-md-2",md:4,children:Object(w.jsx)(d.a,{className:"".concat(l.a.Content," ").concat(ie.a.Container),children:Object(w.jsx)("div",{className:"p-2",children:y})})})]})})})},Ue=a(55),Ge=a.n(Ue);var Me=function(){const[e,t]=Object(s.useState)(!1),{id:a}=Object(v.useParams)(),[c,n]=Object(s.useState)(),[o,r]=Object(s.useState)({results:[]}),i=y(),[j,u]=Object(s.useState)(),m=I();Object(s.useEffect)((()=>{(async()=>{try{const[e,t]=await Promise.all([O.get("/profiles/".concat(a,"/")),O.get("posts/?owner__profile=".concat(a))]);n(e.data),r(t.data),console.log(o)}catch(e){console.log(e)}})(),i&&(async()=>{try{console.log("id",i.profile_id);const e=await O.get("/profiles/".concat(i.profile_id,"/"));console.log(e.data),u(e.data),console.log("CURRENT USER PROFILE",j)}catch(e){console.log(e)}})(),t(!0)}),[a,null===i||void 0===i?void 0:i.profile_id]);const b=Object(w.jsxs)(w.Fragment,{children:[(null===c||void 0===c?void 0:c.is_owner)&&Object(w.jsx)(Ce,{id:null===c||void 0===c?void 0:c.id}),Object(w.jsxs)(Y.a,{noGutters:!0,className:"text-center ".concat(l.a.Content),children:[Object(w.jsx)(X.a,{md:2,className:" mt-1 offset-lg-0",children:Object(w.jsx)(te.a,{className:"".concat(Ge.a.ProfileAvatar),roundedCircle:!0,src:null===c||void 0===c?void 0:c.avatar})}),Object(w.jsx)(X.a,{md:5,className:"mt-1 align-content-center",children:Object(w.jsx)("h3",{className:Ge.a.ProfileUsername,children:null===c||void 0===c?void 0:c.owner})}),Object(w.jsx)(X.a,{md:3,className:"mt-1 offset-md-2 text-lg-right d-flex justify-content-end pr-3",children:i&&!(null!==c&&void 0!==c&&c.is_owner)&&(null!==c&&void 0!==c&&c.following_id?Object(w.jsx)(ee.a,{className:J.a.Button,onClick:async()=>{try{await p.delete("/followers/".concat(c.following_id,"/")),n((e=>({...e,followers_count:c.followers_count-1,following_id:null}))),u((e=>({...e,following_count:j.followers_count-1})))}catch(e){console.log(e)}},children:"Unfollow"}):Object(w.jsx)(ee.a,{className:J.a.Button,onClick:async()=>{try{const{data:e}=await p.post("/followers/",{followed:c.id});n((t=>({...t,followers_count:c.followers_count+1,following_id:e.id}))),u((e=>({...e,following_count:j.followers_count+1})))}catch(e){console.log(e)}},children:"Follow"}))}),Object(w.jsx)(X.a,{className:"".concat(Ge.a.ProfileText," align-content-center"),children:Object(w.jsxs)(Y.a,{className:"justify-content-center no-gutters mt-2",children:[Object(w.jsxs)(X.a,{xs:3,className:"pr-4",children:[Object(w.jsx)("div",{children:null===c||void 0===c?void 0:c.posts_count}),Object(w.jsx)("span",{children:"Posts"})]}),Object(w.jsxs)(X.a,{xs:3,className:"pr-2",children:[Object(w.jsx)("div",{children:null===c||void 0===c?void 0:c.followers_count}),Object(w.jsx)("span",{children:"Followers"})]}),Object(w.jsxs)(X.a,{xs:3,className:"pl-2",children:[Object(w.jsx)("div",{children:null===c||void 0===c?void 0:c.following_count}),Object(w.jsx)("span",{children:"Following"})]}),Object(w.jsxs)(X.a,{xs:3,className:"pl-4",children:[Object(w.jsx)("div",{children:null===c||void 0===c?void 0:c.saved_count}),Object(w.jsx)("span",{children:"Status"})]})]})}),Object(w.jsxs)(X.a,{xs:12,className:"".concat(Ge.a.ProfileText," text-left mt-3"),children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("strong",{children:"Name: "}),null===c||void 0===c?void 0:c.name]}),Object(w.jsxs)("div",{className:"mt-2",children:[Object(w.jsx)("strong",{children:"Bio: "}),null===c||void 0===c?void 0:c.bio]})]})]})]}),h=Object(w.jsx)(w.Fragment,{children:o.results.length?Object(w.jsx)(De.a,{children:o.results.map((e=>Object(w.jsx)(ye,{...e,className:l.a.Content,setCurrentPosts:r,profilePage:!0},e.id))),dataLength:o.results.length,loader:Object(w.jsx)(T,{spinner:!0}),hasMore:!!o.next,next:()=>N(o,r)}):Object(w.jsx)("div",{className:"".concat(l.a.Content),children:Object(w.jsx)(T,{message:"".concat(null===c||void 0===c?void 0:c.owner," hasn't posted yet.")})})});return Object(w.jsxs)(Y.a,{className:"mt-2",children:[Object(w.jsx)(X.a,{className:"py-2 p-md-1",md:8,children:Object(w.jsx)(d.a,{children:e?Object(w.jsxs)(w.Fragment,{children:[b,m&&Object(w.jsx)(Re,{}),h]}):Object(w.jsx)(T,{spinner:!0})})}),!m&&Object(w.jsxs)(X.a,{md:4,className:"p-md-2",children:[Object(w.jsx)(M,{}),Object(w.jsx)(Re,{})]})]})};var We=()=>{var e,t;const[a,c]=Object(s.useState)(""),[n,o]=Object(s.useState)({}),r=Object(v.useHistory)(),{id:i}=Object(v.useParams)(),j=y(),u=k();Object(s.useEffect)((()=>{var e;(null===j||void 0===j||null===(e=j.profile_id)||void 0===e?void 0:e.toString())===i?c(j.username):r.push("/")}),[j,r,i]);return Object(w.jsxs)(Y.a,{className:z.a.Row,children:[Object(w.jsx)(X.a,{className:"my-auto p-md-2",md:5,children:Object(w.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(w.jsx)("h1",{className:z.a.Header,children:"Change Username"}),Object(w.jsxs)(K.a,{onSubmit:async e=>{e.preventDefault();try{await p.put("/dj-rest-auth/user/",{username:a}),u((e=>({...e,username:a}))),r.goBack()}catch(s){var t;console.log(s),o(null===(t=s.response)||void 0===t?void 0:t.data)}},children:[Object(w.jsxs)(K.a.Group,{children:[Object(w.jsx)(K.a.Label,{children:"Change username"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,placeholder:"username",type:"text",value:a,onChange:e=>c(e.target.value)})]}),null===n||void 0===n||null===(e=n.username)||void 0===e?void 0:e.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsxs)("div",{className:"text-right",children:[Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," mr-1"),onClick:()=>r.goBack(),children:"Cancel"}),Object(w.jsx)(ee.a,{className:"".concat(J.a.Button),type:"submit",children:"Save"}),null===n||void 0===n||null===(t=n.non_field_errors)||void 0===t?void 0:t.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",className:"mt-3",children:e},t)))]})]})]})}),Object(w.jsx)(X.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(w.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Z})})]})};var qe=()=>{var e,t,a;const c=Object(v.useHistory)(),{id:n}=Object(v.useParams)(),o=y(),[r,i]=Object(s.useState)({new_password1:"",new_password2:""}),{new_password1:j,new_password2:u}=r,[m,b]=Object(s.useState)({}),h=e=>{i({...r,[e.target.name]:e.target.value})};Object(s.useEffect)((()=>{var e;(null===o||void 0===o||null===(e=o.profile_id)||void 0===e?void 0:e.toString())!==n&&c.push("/")}),[o,c,n]);return Object(w.jsxs)(Y.a,{className:z.a.Row,children:[Object(w.jsx)(X.a,{className:"my-auto p-md-2",md:5,children:Object(w.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(w.jsx)("h1",{className:z.a.Header,children:"Change Password"}),Object(w.jsxs)(K.a,{onSubmit:async e=>{e.preventDefault();try{await p.post("/dj-rest-auth/password/change/",r),c.goBack()}catch(a){var t;console.log(a),b(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(w.jsxs)(K.a.Group,{controlId:"new_password1",children:[Object(w.jsx)(K.a.Label,{className:"d-none",children:"New password"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,placeholder:"New password",type:"password",value:j,onChange:h,name:"new_password1"})]}),null===m||void 0===m||null===(e=m.new_password1)||void 0===e?void 0:e.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsxs)(K.a.Group,{controlId:"new_password2",children:[Object(w.jsx)(K.a.Label,{className:"d-none",children:"Confirm password"}),Object(w.jsx)(K.a.Control,{className:z.a.Input,placeholder:"Confirm new password",type:"password",value:u,onChange:h,name:"new_password2"})]}),null===m||void 0===m||null===(t=m.new_password2)||void 0===t?void 0:t.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsxs)("div",{className:"text-right",children:[Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," mr-1"),onClick:()=>c.goBack(),children:"Cancel"}),Object(w.jsx)(ee.a,{type:"submit",className:"".concat(J.a.Button),children:"Save"}),null===m||void 0===m||null===(a=m.non_field_errors)||void 0===a?void 0:a.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",className:"mt-3",children:e},t)))]})]})]})}),Object(w.jsx)(X.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(w.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Z})})]})};var Ve=()=>{var e,t,a;const c=y(),n=k(),{id:o}=Object(v.useParams)(),r=Object(v.useHistory)(),i=Object(s.useRef)(),[j,u]=Object(s.useState)({name:"",bio:"",avatar:""}),{name:m,bio:b,avatar:h}=j,[x,p]=Object(s.useState)({}),g=I();Object(s.useEffect)((()=>{(async()=>{var e;if((null===c||void 0===c||null===(e=c.profile_id)||void 0===e?void 0:e.toString())===o)try{const{data:e}=await O.get("/profiles/".concat(o,"/")),{name:t,bio:a,avatar:s}=e;u({name:t,bio:a,avatar:s})}catch(t){console.log(t),r.push("/")}else r.push("/")})()}),[c,r,o]);const f=e=>{u({...j,[e.target.name]:e.target.value})},N=Object(w.jsxs)(K.a.Group,{children:[h&&Object(w.jsx)("figure",{children:Object(w.jsx)(te.a,{className:z.a.Image,src:h,fluid:!0})}),null===x||void 0===x||null===(e=x.avatar)||void 0===e?void 0:e.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsx)("div",{className:"mr-auto text-right",children:Object(w.jsx)(K.a.Label,{className:"".concat(J.a.Button," btn"),htmlFor:"image-upload",children:"Change the image"})}),Object(w.jsx)(K.a.File,{hidden:!0,id:"image-upload",ref:i,accept:"image/*",onChange:e=>{e.target.files.length&&u({...j,avatar:URL.createObjectURL(e.target.files[0])})}})]}),_=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(K.a.Group,{children:[Object(w.jsx)(K.a.Label,{children:"Your name"}),Object(w.jsx)(K.a.Control,{as:"textarea",value:m,placeholder:"Your name",rows:1,name:"name",onChange:f})]}),null===x||void 0===x||null===(t=x.name)||void 0===t?void 0:t.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t))),Object(w.jsxs)(K.a.Group,{children:[Object(w.jsx)(K.a.Label,{children:"Your bio"}),Object(w.jsx)(K.a.Control,{as:"textarea",value:b,placeholder:"Your bio",name:"bio",rows:4,onChange:f})]}),null===x||void 0===x||null===(a=x.bio)||void 0===a?void 0:a.map(((e,t)=>Object(w.jsx)($.a,{variant:"warning",children:e},t)))]}),C=Object(w.jsxs)("div",{className:"text-right",children:[Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," m-2"),onClick:()=>r.goBack(),children:"Cancel"}),Object(w.jsx)(ee.a,{className:"".concat(J.a.Button," m-2"),type:"submit",children:"Post"})]});return Object(w.jsx)(K.a,{onSubmit:async e=>{var t;e.preventDefault();const a=new FormData;var s;(a.append("name",m),a.append("bio",b),null!==i&&void 0!==i&&null!==(t=i.current)&&void 0!==t&&t.files[0])&&a.append("avatar",null===i||void 0===i||null===(s=i.current)||void 0===s?void 0:s.files[0]);try{const{data:e}=await O.put("/profiles/".concat(o,"/"),a);n((t=>({...t,profile_avatar:e.avatar}))),r.goBack()}catch(l){var c;console.log(l),p(null===(c=l.response)||void 0===c?void 0:c.data)}},children:Object(w.jsx)(Y.a,{children:g?Object(w.jsx)(X.a,{className:"p-0 p-md-2",children:Object(w.jsxs)(d.a,{className:l.a.Content,children:[Object(w.jsx)("div",{children:_}),Object(w.jsx)("div",{children:N}),Object(w.jsx)("div",{children:C})]})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(X.a,{md:8,className:"p-0 p-md-2",children:Object(w.jsxs)(d.a,{className:l.a.Content,children:[Object(w.jsx)("div",{children:_}),Object(w.jsx)("div",{children:C})]})}),Object(w.jsx)(X.a,{className:"py-2 p-0 p-md-2",md:4,children:Object(w.jsx)(d.a,{className:"".concat(l.a.Content," ").concat(ie.a.Container),children:Object(w.jsx)("div",{className:"p-2",children:N})})})]})})})};var ze=function(){const e=y(),t=Object(s.useContext)(H),a=(null===e||void 0===e?void 0:e.profile_id)||"";return Object(w.jsxs)("div",{className:l.a.App,children:[Object(w.jsx)(q,{}),Object(w.jsx)(d.a,{className:l.a.Main,children:Object(w.jsxs)(v.Switch,{children:[Object(w.jsx)(v.Route,{className:l.a.Content,exact:!0,path:"/",render:()=>Object(w.jsx)(Ee,{message:"No results found."})}),Object(w.jsx)(v.Route,{exact:!0,path:"/feed",render:()=>Object(w.jsx)(Ee,{message:"No results found. Adjust your search keyword or follow a user.",filter:"owner__followed__owner__profile=".concat(a,"&")})}),Object(w.jsx)(v.Route,{exact:!0,path:"/liked",render:()=>Object(w.jsx)(Ee,{message:"No results found. Adjust your search keyword or like a post.",filter:"likes__owner__profile=".concat(a,"&ordering=-likes__created&")})}),Object(w.jsx)(v.Route,{exact:!0,path:"/saved",render:()=>Object(w.jsx)(Ee,{message:"No results found. Adjust your search keyword or save a post.",filter:"saved__owner__profile=".concat(a,"&ordering=-saved__created&")})}),Object(w.jsx)(v.Route,{exact:!0,path:"/categories/:id/posts",render:()=>Object(w.jsx)(Ee,{message:"No results found.",filter:"category_id=".concat(t,"&ordering=-created&"),selectedCategory:t})}),Object(w.jsx)(v.Route,{exact:!0,path:"/login",render:()=>Object(w.jsx)(ce,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/register",render:()=>Object(w.jsx)(se,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/posts/create",render:()=>Object(w.jsx)(je,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/posts/:id/edit",render:()=>Object(w.jsx)(He,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/posts/:id",render:()=>Object(w.jsx)(Te,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/profiles/:id",render:()=>Object(w.jsx)(Me,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/profiles/:id/edit/username",render:()=>Object(w.jsx)(We,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/profiles/:id/edit/password",render:()=>Object(w.jsx)(qe,{})}),Object(w.jsx)(v.Route,{exact:!0,path:"/profiles/:id/edit",render:()=>Object(w.jsx)(Ve,{})}),Object(w.jsx)(v.Route,{render:()=>Object(w.jsx)(re,{})})]})})]})};var Qe=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,137)).then((t=>{let{getCLS:a,getFID:s,getFCP:c,getLCP:n,getTTFB:o}=t;a(e),s(e),c(e),n(e),o(e)}))};o.a.render(Object(w.jsx)(b.a,{children:Object(w.jsx)(P,{children:Object(w.jsx)(G,{children:Object(w.jsx)(ze,{})})})}),document.getElementById("root")),Qe()},19:function(e,t,a){e.exports={NavBar:"NavBar_NavBar__1amC6",NavLink:"NavBar_NavLink__34ons",Active:"NavBar_Active__3PBZb",Brand:"NavBar_Brand__iWmt7",NavLinkOffset:"NavBar_NavLinkOffset__1pQTu"}},23:function(e,t,a){e.exports={Post:"Post_Post__3UScv",PostHeader:"Post_PostHeader__3M--4",PostText:"Post_PostText__3e2Ye",IconText:"Post_IconText__YMwZV",Category:"Post_Category__3sIbT",PostImage:"Post_PostImage__1ZuuZ",HeaderContent:"Post_HeaderContent__r6onr"}},32:function(e,t,a){e.exports={DropdownItem:"Dropdowns_DropdownItem__3dbO9",DropdownBackground:"Dropdowns_DropdownBackground__1ejJx",Absolute:"Dropdowns_Absolute__3M8sS",DropdownIcon:"Dropdowns_DropdownIcon__2sva1"}},40:function(e,t,a){e.exports={Container:"PostCreateEditForm_Container__2WHuV",ButtonRight:"PostCreateEditForm_ButtonRight__31el0"}},55:function(e,t,a){e.exports={ProfileAvatar:"ProfilePage_ProfileAvatar__2KT7F",ProfileUsername:"ProfilePage_ProfileUsername__zUlMb",ProfileText:"ProfilePage_ProfileText__3KIBm"}},67:function(e,t,a){e.exports={Header:"PopularCategories_Header__209lK",CategoryName:"PopularCategories_CategoryName__5QzJb",Container:"PopularCategories_Container__2JDrL"}},73:function(e,t,a){e.exports={Avatar:"Avatar_Avatar__196lW",Username:"Avatar_Username__3u3zc"}},74:function(e,t,a){e.exports={Asset:"Asset_Asset__1dBcX",ProfileText:"Asset_ProfileText__2yoNB"}},75:function(e,t,a){e.exports={NotFound:"PageNotFound_NotFound__2kk2i",Subheader:"PageNotFound_Subheader__y_PYS"}},76:function(e,t,a){e.exports={Commenter:"Comment_Commenter__jS4-t",ModifiedDate:"Comment_ModifiedDate__2xZBi"}},77:function(e,t,a){e.exports={AddImage:"Adds_AddImage__3CCcO",AddText:"Adds_AddText__208_5"}},9:function(e,t,a){e.exports={App:"App_App__16ZpL",Content:"App_Content__ZaMNr",Main:"App_Main__HQkvd"}},91:function(e,t,a){e.exports={CommentFormWidth:"PostPage_CommentFormWidth__2vEMG"}},97:function(e,t,a){}},[[127,1,2]]]);
//# sourceMappingURL=main.5bbf4d43.chunk.js.map