(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{10:function(e,t,a){e.exports={App:"App_App__16ZpL",Content:"App_Content__ZaMNr",Main:"App_Main__HQkvd"}},103:function(e,t,a){},11:function(e,t,a){e.exports={Row:"AuthForm_Row__2PgqZ",Input:"AuthForm_Input__3ONjR",Header:"AuthForm_Header__3VpYh",Link:"AuthForm_Link__2iPzL",Container:"AuthForm_Container__3WYp7",AuthCol:"AuthForm_AuthCol__1jY3i",Image:"AuthForm_Image__2wfBh"}},12:function(e,t,a){e.exports={Button:"Button_Button__27i9m",Wide:"Button_Wide__2ScDr"}},133:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(32),o=a.n(n),r=(a(103),a(10)),l=a.n(r),i=a(52),d=a(13),j=a(76),m=a(21),u=a.n(m),b=a(15),h=a(14),x=a.n(h);x.a.defaults.baseURL="/api",x.a.defaults.headers.post["Content-Type"]="multipart/form-data",x.a.defaults.withCredentials=!0;const O=x.a.create(),p=x.a.create();var v=a(16),g=a(93);const f=()=>{localStorage.removeItem("refreshTokenTimestamp")},N=async(e,t)=>{try{let a=new URL(e.next);a=(a.pathname+a.search).replace("/api","");const{data:s}=await x.a.get(a);t((e=>({...e,next:s.next,results:s.results.reduce(((e,t)=>e.some((e=>e.id===t.id))?e:[...e,t]),e.results)})))}catch(a){}};var _=a(0);const w=Object(s.createContext)(),C=Object(s.createContext)(),y=()=>Object(s.useContext)(w),P=()=>Object(s.useContext)(C),k=e=>{let{children:t}=e;const[a,c]=Object(s.useState)(null),n=Object(v.useHistory)();return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await p.get("dj-rest-auth/user/");c(e)}catch(e){}})()}),[]),Object(s.useMemo)((()=>{O.interceptors.request.use((async e=>{if(localStorage.getItem("refreshTokenTimestamp")){try{await x.a.post("/dj-rest-auth/token/refresh/")}catch(t){return c((e=>(e&&n.push("/login"),null))),f(),e}return e}}),(e=>Promise.reject(e))),p.interceptors.response.use((e=>e),(async e=>{var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)){try{await x.a.post("/dj-rest-auth/token/refresh/")}catch(e){c((e=>(e&&n.push("/login"),null))),f()}return x()(e.config)}return Promise.reject(e)}))}),[n]),Object(_.jsx)(w.Provider,{value:a,children:Object(_.jsx)(C.Provider,{value:c,children:t})})};var L=a(81),A=a.n(L);var B=e=>{let{src:t,height:a=45,text:s}=e;return Object(_.jsxs)("span",{className:A.a.Username,children:[Object(_.jsx)("img",{className:A.a.Avatar,src:t,height:a,width:a,alt:"user avatar"}),s]})};var S=()=>{const[e,t]=Object(s.useState)(window.innerWidth);return Object(s.useEffect)((()=>{const e=()=>{t(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e<768},I=a(137),F=a(73),D=a.n(F);var R=e=>{let{spinner:t,src:a,message:s,buttonMessage:c}=e;return Object(_.jsxs)("div",{className:D.a.Asset,children:[t&&Object(_.jsx)(I.a,{animation:"border",variant:"warning"}),a&&Object(_.jsx)("img",{src:a,alt:s}),s&&Object(_.jsx)("p",{className:"".concat(D.a.ProfileText," mt-4"),children:s}),c&&Object(_.jsx)("p",{className:"".concat(D.a.ButtonText," mt-4"),children:c})]})},T=a(74),E=a.n(T);const H=Object(s.createContext)(),U=Object(s.createContext)(),G=e=>{let{children:t}=e;const[a,c]=Object(s.useState)(1);return Object(_.jsx)(H.Provider,{value:a,children:Object(_.jsx)(U.Provider,{value:c,children:t})})};var M=e=>{var t,a;let{selectedCategory:c}=e;const[n,o]=Object(s.useState)(""),r=Object(s.useContext)(U);Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/categories/");o(e)}catch(e){}})()}),[]);return Object(_.jsx)("div",{className:"".concat(l.a.Content," ").concat(E.a.CategoryContainer),children:null!==n&&void 0!==n&&null!==(t=n.results)&&void 0!==t&&t.length?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h1",{className:E.a.Header,children:"Popular categories"}),null===(a=n.results)||void 0===a?void 0:a.map((e=>Object(_.jsx)(b.b,{to:"/categories/".concat(e.id,"/posts"),className:E.a.CategoryName,onClick:()=>{return t=e.id,void r(t);var t},children:e.name},e.id)))]}):Object(_.jsx)(R,{spinner:!0})})};var W=()=>{const[e,t]=Object(s.useState)(!1),a=Object(s.useRef)(null);return Object(s.useEffect)((()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&t(!1)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}}),[a]),{expanded:e,setExpanded:t,ref:a}};var q=()=>{const e=y(),t=P(),{expanded:a,setExpanded:s,ref:c}=W(),n=S(),o=Object(_.jsxs)(b.c,{to:"/posts/create",className:u.a.NavLink,activeClassName:u.a.Active,children:[Object(_.jsx)("i",{className:"fa-solid fa-plus mr-2"}),"Post"]}),r=Object(_.jsx)(b.c,{exact:!0,to:"/",className:u.a.NavLink,activeClassName:u.a.Active,children:"Feed"}),l=Object(_.jsx)(b.c,{to:"/profiles/".concat(null===e||void 0===e?void 0:e.profile_id),className:u.a.NavLink,children:Object(_.jsx)(B,{src:null===e||void 0===e?void 0:e.profile_avatar,text:(null===e||void 0===e?void 0:e.username.length)<=9&&(null===e||void 0===e?void 0:e.username),height:38})}),m=Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(b.c,{to:"/feed",className:"".concat(u.a.NavLink," ").concat(u.a.NavLinkOffset),activeClassName:u.a.Active,children:[Object(_.jsx)("i",{className:"fa-solid fa-user-group mr-2"}),"Subscribed"]}),Object(_.jsxs)(b.c,{to:"/liked",className:"".concat(u.a.NavLink," ").concat(u.a.NavLinkOffset),activeClassName:u.a.Active,children:[Object(_.jsx)("i",{className:"fas fa-heart mr-2"}),"Liked"]}),Object(_.jsxs)(b.c,{to:"/saved",className:"".concat(u.a.NavLink," ").concat(u.a.NavLinkOffset," ").concat(n?"mb-2":""),activeClassName:u.a.Active,children:[Object(_.jsx)("i",{className:"fa-brands fa-earlybirds mr-2"}),"Saved"]}),n&&Object(_.jsx)(M,{className:"text-right"}),Object(_.jsx)(b.c,{to:"/",className:"".concat(u.a.NavLink," ").concat(u.a.NavLinkOffset),onClick:async()=>{try{await x.a.post("/dj-rest-auth/logout/"),t(null),f()}catch(e){}},children:"Log out"})]}),h=Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(b.c,{to:"/login",className:u.a.NavLink,activeClassName:u.a.Active,children:"Log in"}),Object(_.jsx)(b.c,{to:"/register",className:u.a.NavLink,activeClassName:u.a.Active,children:"Register"}),n&&Object(_.jsx)(M,{className:"text-right"})]});return Object(_.jsx)(i.a,{className:u.a.NavBar,expand:"md",fixed:"top",bg:"dark",variant:"dark",expanded:a,children:Object(_.jsxs)(d.a,{children:[Object(_.jsxs)(b.c,{to:"/",children:[Object(_.jsx)(i.a.Brand,{children:Object(_.jsx)("img",{src:"data:image/png;base64,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",alt:"logo",height:"47px"})}),Object(_.jsx)(i.a.Brand,{className:"".concat(u.a.Brand," mr-auto text-right"),children:"Birdie"})]}),Object(_.jsx)(j.a,{className:"mr-auto text-right",children:e?o:r}),Object(_.jsx)(j.a,{className:"ml-auto text-left",children:e&&n&&l}),Object(_.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:()=>s(!a),ref:c}),Object(_.jsx)(i.a.Collapse,{id:"basic-navbar-nav",children:Object(_.jsx)(j.a,{className:"ml-auto text-right",children:e?Object(_.jsxs)(_.Fragment,{children:[m,!n&&l]}):h})})]})})},V=a(11),z=a.n(V),Q=a(12),J=a.n(Q),Y=a.p+"static/media/bird.2843c24d.jpg",Z=a(6),X=a(17),K=a(20),$=a(9),ee=a(18),te=a(23);const ae=e=>{const t=Object(v.useHistory)();Object(s.useEffect)((()=>{(async()=>{try{await x.a.post("/dj-rest-auth/token/refresh/"),"loggedIn"===e&&t.push("/")}catch(a){"loggedOut"===e&&t.push("/login/")}})()}),[t,e])};var se=()=>{var e,t,a,c;ae("loggedIn");const[n,o]=Object(s.useState)({username:"",password1:"",password2:""}),{username:r,password1:i,password2:j}=n,[m,u]=Object(s.useState)({}),h=Object(v.useHistory)(),O=e=>{o({...n,[e.target.name]:e.target.value})};return Object(_.jsxs)(ee.a,{className:z.a.Row,children:[Object(_.jsxs)($.a,{className:"".concat(z.a.AuthCol," my-auto p-md-2"),md:5,children:[Object(_.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(_.jsx)("h1",{className:z.a.Header,children:"Sign up"}),Object(_.jsxs)(Z.a,{onSubmit:async e=>{e.preventDefault();try{await x.a.post("/dj-rest-auth/registration/",n),h.push("/login")}catch(a){var t;u(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(_.jsxs)(Z.a.Group,{controlId:"username",children:[Object(_.jsx)(Z.a.Label,{className:"d-none",children:"Username"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,type:"text",placeholder:"Username",name:"username",value:r,onChange:O})]}),null===m||void 0===m||null===(e=m.username)||void 0===e?void 0:e.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsxs)(Z.a.Group,{controlId:"password1",children:[Object(_.jsx)(Z.a.Label,{className:"d-none",children:"Password"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,type:"password",placeholder:"Password",name:"password1",value:i,onChange:O})]}),null===m||void 0===m||null===(t=m.password1)||void 0===t?void 0:t.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsxs)(Z.a.Group,{controlId:"password2",children:[Object(_.jsx)(Z.a.Label,{className:"d-none",children:"Confirm Password"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,type:"password",placeholder:"Password",name:"password2",value:j,onChange:O})]}),null===m||void 0===m||null===(a=m.password2)||void 0===a?void 0:a.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsx)(K.a,{className:"".concat(J.a.Button," ").concat(J.a.Wide),type:"submit",children:"Register"}),null===m||void 0===m||null===(c=m.non_field_errors)||void 0===c?void 0:c.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",className:"mt-3",children:e},t)))]})]}),Object(_.jsx)(d.a,{className:"mt-3 ".concat(l.a.Content),children:Object(_.jsxs)(b.b,{className:z.a.Link,to:"/login",children:["Already have an account? ",Object(_.jsx)("span",{children:"Login"})]})})]}),Object(_.jsx)($.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(_.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Y})})]})};var ce=function(){var e,t,a;const c=P();ae("loggedIn");const[n,o]=Object(s.useState)({username:"",password:""}),{username:r,password:i}=n,[j,m]=Object(s.useState)({}),u=Object(v.useHistory)(),h=e=>{o({...n,[e.target.name]:e.target.value})};return Object(_.jsxs)(ee.a,{className:z.a.Row,children:[Object(_.jsxs)($.a,{className:"my-auto p-md-2",md:5,children:[Object(_.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(_.jsx)("h1",{className:z.a.Header,children:"Sign in"}),Object(_.jsxs)(Z.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await x.a.post("dj-rest-auth/login/",n);c(e.user),(e=>{const t=Object(g.a)(null===e||void 0===e?void 0:e.refresh_token).exp;localStorage.setItem("refreshTokenTimestamp",t)})(e),u.goBack()}catch(a){var t;m(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(_.jsxs)(Z.a.Group,{controlId:"username",children:[Object(_.jsx)(Z.a.Label,{className:"d-none",children:"Username"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,type:"text",placeholder:"Enter Username",name:"username",value:r,onChange:h})]}),null===j||void 0===j||null===(e=j.username)||void 0===e?void 0:e.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsxs)(Z.a.Group,{controlId:"password",children:[Object(_.jsx)(Z.a.Label,{className:"d-none",children:"Password"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,type:"password",placeholder:"Password",name:"password",value:i,onChange:h})]}),null===j||void 0===j||null===(t=j.password)||void 0===t?void 0:t.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsx)(K.a,{type:"submit",className:"".concat(J.a.Button," ").concat(J.a.Wide),children:"Login"}),null===j||void 0===j||null===(a=j.non_field_errors)||void 0===a?void 0:a.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",className:"mt-3",children:e},t)))]})]}),Object(_.jsx)(d.a,{className:"mt-3 ".concat(l.a.Content),children:Object(_.jsxs)(b.b,{className:z.a.Link,to:"/register",children:["Don't have an account? ",Object(_.jsx)("span",{children:"Register now!"})]})})]}),Object(_.jsx)($.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(_.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Y})})]})},ne=a(82),oe=a.n(ne);var re=()=>Object(_.jsx)(ee.a,{className:z.a.Row,children:Object(_.jsx)($.a,{className:"my-auto offset-md-2",md:8,children:Object(_.jsxs)(d.a,{className:l.a.Content,children:[Object(_.jsx)("h1",{className:"".concat(l.a.Main," ").concat(z.a.Header),children:"This page seems to have flown away"}),Object(_.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(oe.a.Filter),src:Y}),Object(_.jsx)("h2",{className:oe.a.Subheader,children:"Do you ever feel like a plastic bag"})]})})}),le=a(39),ie=a.n(le),de=a(35);var je=function(){var e,t,a,c;ae("loggedOut");const[n,o]=Object(s.useState)({}),[r,i]=Object(s.useState)(""),[j,m]=Object(s.useState)({content:"",image:"",category:""}),{content:u,image:b,category:h}=j,p=Object(s.useRef)(null),v=Object(de.useHistory)(),g=S();Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/categories/");i(e)}catch(e){}})()}),[]);const f=Object(_.jsxs)("div",{className:"text-center",children:[Object(_.jsxs)(Z.a.Group,{children:[Object(_.jsx)(Z.a.Label,{htmlFor:"category",children:"Category"}),Object(_.jsxs)(Z.a.Control,{as:"select","aria-label":"category",id:"category",defaultValue:"Category",onChange:e=>{m({...j,category:e.target.value})},children:[Object(_.jsx)("option",{disabled:!0,children:"Category"}),null===(e=r.results)||void 0===e?void 0:e.map((e=>Object(_.jsxs)("option",{value:e.id,children:[e.name,": ",e.description]},e.id)))]})]}),null===(t=n.category)||void 0===t?void 0:t.map((e=>Object(_.jsx)(X.a,{variant:"warning",children:"You need to choose a category."},e)))]}),N=Object(_.jsxs)("div",{className:"text-center",children:[Object(_.jsxs)(Z.a.Group,{children:[Object(_.jsx)(Z.a.Label,{children:"Content"}),Object(_.jsx)(Z.a.Control,{as:"textarea",rows:4,name:"content",placeholder:"Type your post",value:u,onChange:e=>{m({...j,content:e.target.value})}})]}),null===(a=n.content)||void 0===a?void 0:a.map((e=>Object(_.jsx)(X.a,{variant:"warning",children:"Post has to contain at least some text, but no longer than 300 characters."},e)))]}),w=Object(_.jsxs)("div",{children:[Object(_.jsxs)(Z.a.Group,{children:[b?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("figure",{children:Object(_.jsx)(te.a,{className:z.a.Image,src:b,rounded:!0})}),Object(_.jsx)("div",{className:"mr-auto text-right",children:Object(_.jsx)(Z.a.Label,{className:"".concat(J.a.Button," btn"),htmlFor:"image-upload",children:"Change the image"})})]}):Object(_.jsx)(Z.a.Label,{className:"".concat(J.a.Button," text-center ").concat(g?ie.a.ButtonRight:J.a.Wide),htmlFor:"image-upload",children:Object(_.jsx)(R,{buttonMessage:"Click or tap to upload an image"})}),Object(_.jsx)(Z.a.File,{id:"image-upload",accept:"image/*",onChange:e=>{e.target.files.length&&(URL.revokeObjectURL(b),m({...j,image:URL.createObjectURL(e.target.files[0])}))},ref:p,hidden:!0})]}),null===(c=n.image)||void 0===c?void 0:c.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t)))]}),C=Object(_.jsxs)("div",{className:"text-right",children:[Object(_.jsx)(K.a,{className:"".concat(J.a.Button," m-2"),onClick:()=>v.goBack(),children:"Cancel"}),Object(_.jsx)(K.a,{className:"".concat(J.a.Button," m-2"),type:"submit",children:"Post"})]});return Object(_.jsx)(Z.a,{onSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("content",u),0!==p.current.files.length&&t.append("image",p.current.files[0]),t.append("category",h);try{const{data:e}=await O.post("/posts/",t);v.push("/posts/".concat(e.id))}catch(c){var a,s;if(401!==(null===(a=c.response)||void 0===a?void 0:a.status))o(null===(s=c.response)||void 0===s?void 0:s.data)}},children:Object(_.jsx)(ee.a,{children:g?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)($.a,{className:"p-0 p-md-2",children:Object(_.jsxs)(d.a,{className:l.a.Content,children:[Object(_.jsx)("div",{children:N}),Object(_.jsx)("div",{children:f}),Object(_.jsx)("div",{className:"p-2",children:w}),Object(_.jsx)("div",{children:C})]})})}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)($.a,{md:8,className:"p-0 p-md-2",children:Object(_.jsxs)(d.a,{className:l.a.Content,children:[Object(_.jsx)("div",{children:N}),Object(_.jsx)("div",{children:f}),Object(_.jsx)("div",{children:C})]})}),Object(_.jsx)($.a,{className:"py-2 p-0 p-md-2",md:4,children:Object(_.jsx)(d.a,{className:"".concat(l.a.Content," ").concat(ie.a.Container),children:Object(_.jsx)("div",{className:"p-2",children:w})})})]})})})},me=a(22),ue=a.n(me),be=a(97),he=a.n(be),xe=a(61),Oe=a(58),pe=a(51),ve=a(50),ge=a(30),fe=a(33),Ne=a.n(fe);const _e=c.a.forwardRef(((e,t)=>{let{onClick:a}=e;return Object(_.jsx)("i",{className:"fas fa-ellipsis-v",ref:t,onClick:e=>{e.preventDefault(),a(e)}})})),we=e=>{let{handleEdit:t,handleDelete:a}=e;return Object(_.jsxs)(ge.a,{className:"ml-auto",drop:"left",children:[Object(_.jsx)(ge.a.Toggle,{as:_e}),Object(_.jsxs)(ge.a.Menu,{className:"text-center ".concat(Ne.a.DropdownBackground),popperConfig:{strategy:"fixed"},children:[Object(_.jsx)(ge.a.Item,{className:Ne.a.DropdownItem,onClick:t,"aria-label":"edit",children:Object(_.jsx)("i",{className:"fas fa-edit ".concat(Ne.a.DropdownIcon)})}),Object(_.jsx)(ge.a.Item,{className:Ne.a.DropdownItem,onClick:a,"aria-label":"delete",children:Object(_.jsx)("i",{className:"fas fa-trash-alt ".concat(Ne.a.DropdownIcon)})})]})]})};function Ce(e){let{id:t}=e;const a=Object(v.useHistory)();return Object(_.jsxs)(ge.a,{className:"px-4 m-4 ".concat(Ne.a.Absolute),drop:"left",children:[Object(_.jsx)(ge.a.Toggle,{as:_e}),Object(_.jsxs)(ge.a.Menu,{className:"text-center ".concat(Ne.a.DropdownBackground),children:[Object(_.jsxs)(ge.a.Item,{onClick:()=>a.push("/profiles/".concat(t,"/edit")),"aria-label":"edit-profile",children:[Object(_.jsx)("i",{className:"fas fa-edit ".concat(Ne.a.DropdownIcon)})," edit profile"]}),Object(_.jsxs)(ge.a.Item,{onClick:()=>a.push("/profiles/".concat(t,"/edit/username")),"aria-label":"edit-username",children:[Object(_.jsx)("i",{className:"far fa-id-card ".concat(Ne.a.DropdownIcon," mr-1")}),"Change username"]}),Object(_.jsxs)(ge.a.Item,{onClick:()=>a.push("/profiles/".concat(t,"/edit/password")),"aria-label":"edit-password",children:[Object(_.jsx)("i",{className:"fas fa-key ".concat(Ne.a.DropdownIcon," mr-1")}),"Change password"]})]})]})}var ye=e=>{const{id:t,owner:a,content:s,modified:c,image:n,profile_id:o,profile_avatar:r,like_id:l,comments_count:i,likes_count:j,category_name:m,saved_id:u,saved_count:h,postPage:x,profilePage:O,setPosts:g,setCurrentPosts:f}=e,N=y(),w=(null===N||void 0===N?void 0:N.username)===a,C=Object(v.useHistory)();return Object(_.jsxs)(xe.a,{className:O?ue.a.ProfilePost:ue.a.Post,children:[Object(_.jsxs)(xe.a.Body,{children:[Object(_.jsxs)(Oe.a,{className:"".concat(ue.a.PostHeader," d-flex justify-content-between"),children:[Object(_.jsx)($.a,{children:Object(_.jsxs)(b.b,{to:"/profiles/".concat(o,"/"),children:[Object(_.jsx)(B,{src:r,height:45}),a,!x&&!O&&Object(_.jsx)("i",{className:"fa-solid fa-arrow-up-right-from-square ml-2 ".concat(ue.a.OwnerLinkIcon)})]})}),Object(_.jsxs)($.a,{className:"mt-2 text-right d-flex justify-content-end p-0 pt-1",children:[Object(_.jsx)("span",{children:c}),Object(_.jsx)("span",{className:"ml-3",children:w&&x&&Object(_.jsx)(we,{handleEdit:()=>{C.push("/posts/".concat(t,"/edit"))},handleDelete:async()=>{try{await p.delete("/posts/".concat(t,"/")),C.push("/")}catch(e){}}})})]})]}),Object(_.jsxs)(b.b,{to:"/posts/".concat(t,"/"),children:[m&&Object(_.jsx)("span",{className:ue.a.Category,children:m}),s&&Object(_.jsx)("span",{className:"text-left ".concat(ue.a.PostText),children:s}),n&&Object(_.jsx)(xe.a.Img,{className:ue.a.PostImage,src:n})]})]}),Object(_.jsx)(xe.a.Body,{children:Object(_.jsx)("div",{children:Object(_.jsx)(d.a,{children:Object(_.jsxs)(ee.a,{className:"justify-content-around text-center",children:[Object(_.jsxs)($.a,{className:ue.a.IconText,children:[w?Object(_.jsx)(pe.a,{placement:"top",overlay:Object(_.jsx)(ve.a,{children:"You can't like your own post!"}),children:Object(_.jsx)("i",{className:"fas fa-heart mt-1 ".concat(ue.a.PostNotLiked)})}):l?Object(_.jsx)("span",{onClick:async()=>{try{await p.delete("/likes/".concat(l,"/")),O?f((e=>({...e,results:e.results.map((e=>e.id===t?{...e,likes_count:e.likes_count-1,like_id:null}:e))}))):g((e=>({...e,results:e.results.map((e=>e.id===t?{...e,likes_count:e.likes_count-1,like_id:null}:e))})))}catch(e){}},children:Object(_.jsx)("i",{className:"fas fa-heart mt-1 ".concat(ue.a.PostLiked)})}):N?Object(_.jsx)("span",{onClick:async()=>{try{const{data:e}=await p.post("/likes/",{post:t});O?f((a=>({...a,results:a.results.map((a=>a.id===t?{...a,likes_count:a.likes_count+1,like_id:e.id}:a))}))):g((a=>({...a,results:a.results.map((a=>a.id===t?{...a,likes_count:a.likes_count+1,like_id:e.id}:a))})))}catch(e){}},children:Object(_.jsx)("i",{className:"fas fa-heart mt-1 ".concat(ue.a.PostNotLiked)})}):Object(_.jsx)(pe.a,{placement:"top",overlay:Object(_.jsx)(ve.a,{children:"Log in to like a post!"}),children:Object(_.jsx)("i",{className:"fas fa-heart mt-1 ".concat(ue.a.PostNotLiked)})}),Object(_.jsx)("span",{className:ue.a.IconText,children:j})]}),Object(_.jsx)($.a,{className:ue.a.IconText,children:Object(_.jsxs)(b.b,{to:"/posts/".concat(t),className:ue.a.IconText,children:[Object(_.jsx)("i",{className:"far fa-comments ".concat(ue.a.CommentIcon)}),i]})}),Object(_.jsx)($.a,{children:N&&!w&&Object(_.jsx)(pe.a,{placement:"top",overlay:Object(_.jsx)(ve.a,{children:"Save a post for later!"}),children:Object(_.jsxs)("span",{onClick:null==u?async()=>{try{const{data:e}=await p.post("/saved/",{post:t});O?f((a=>({...a,results:a.results.map((a=>a.id===t?{...a,saved_count:a.saved_count+1,saved_id:e.id}:a))}))):g((a=>({...a,results:a.results.map((a=>a.id===t?{...a,saved_count:a.saved_count+1,saved_id:e.id}:a))})))}catch(e){}}:async()=>{try{await p.delete("/saved/".concat(u,"/")),O?f((e=>({...e,results:e.results.map((e=>e.id===t?{...e,saved_count:e.saved_count-1,saved_id:null}:e))}))):g((e=>({...e,results:e.results.map((e=>e.id===t?{...e,saved_count:e.saved_count-1,saved_id:null}:e))})))}catch(e){}},className:ue.a.IconText,children:[Object(_.jsx)("i",{className:null!==u?"fa-brands fa-earlybirds ".concat(ue.a.PostSaved):"fa-solid fa-egg ".concat(ue.a.PostNotSaved)}),h]})})})]})})})})]})},Pe=a(98),ke=a(69),Le=a.n(ke);var Ae=function(e){const{post:t,setPost:a,setComments:c,profile_id:n}=e,[o,r]=Object(s.useState)(""),l=y(),i=S();return Object(_.jsxs)(Z.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await p.post("/comments/",{content:o,post:t});c((t=>({...t,results:[e,...t.results]}))),a((e=>({results:[{...e.results[0],comments_count:e.results[0].comments_count+1}]}))),r("")}catch(s){}},children:[Object(_.jsx)(Z.a.Group,{children:Object(_.jsxs)(Pe.a,{children:[Object(_.jsx)(b.b,{to:"/profiles/".concat(n),children:Object(_.jsx)(B,{src:null===l||void 0===l?void 0:l.profile_avatar,text:null===l||void 0===l?void 0:l.username,height:i?35:40})}),Object(_.jsx)(Z.a.Control,{as:"textarea",className:"ml-2 ml-md-3 ".concat(Le.a.CommentHeight),placeholder:"Type comment...",rows:i?4:2,value:o,onChange:e=>{r(e.target.value)}})]})}),Object(_.jsx)("button",{className:"".concat(J.a.Button," d-block ml-auto"),disabled:!o.trim(),type:"submit",children:"Comment"})]})},Be=a(59),Se=a.n(Be);var Ie=function(e){const{id:t,content:a,setShowEditForm:c,setComments:n}=e,[o,r]=Object(s.useState)(a);return Object(_.jsxs)(Z.a,{onSubmit:async e=>{e.preventDefault();try{await p.put("/comments/".concat(t,"/"),{content:o.trim()}),n((e=>({...e,results:e.results.map((e=>e.id===t?{...e,content:o.trim(),modified:"now"}:e))}))),c(!1)}catch(a){}},children:[Object(_.jsx)(Z.a.Group,{children:Object(_.jsx)(Z.a.Control,{as:"textarea",value:o,onChange:e=>{r(e.target.value)},className:Le.a.CommentHeight,rows:2})}),Object(_.jsxs)("div",{className:"text-right",children:[Object(_.jsx)("button",{className:"".concat(J.a.Button," mr-1"),onClick:()=>c(!1),type:"button",children:"Cancel"}),Object(_.jsx)("button",{className:J.a.Button,disabled:!a.trim(),type:"submit",children:"Update"})]})]})};var Fe=e=>{const{profile_id:t,profile_avatar:a,owner:c,modified:n,content:o,id:r,setPost:l,setComments:i}=e,[d,j]=Object(s.useState)(!1),m=y(),u=(null===m||void 0===m?void 0:m.username)===c,b=S();return Object(_.jsx)("div",{className:"mt-2",children:Object(_.jsxs)(Oe.a,{children:[Object(_.jsx)(de.Link,{to:"/profiles/".concat(t),children:Object(_.jsx)(B,{src:a,height:b?35:40})}),Object(_.jsxs)(Oe.a.Body,{className:Se.a.MediaBody,children:[Object(_.jsx)("span",{className:Se.a.Commenter,children:c}),Object(_.jsx)("span",{className:Se.a.ModifiedDate,children:n}),d?Object(_.jsx)(Ie,{id:r,profile_id:t,content:o,setComments:i,setShowEditForm:j}):Object(_.jsx)("p",{className:Se.a.CommentDisplay,children:o})]}),u&&!d&&Object(_.jsx)(we,{handleEdit:()=>j(!0),handleDelete:async()=>{try{await p.delete("/comments/".concat(r,"/")),l((e=>({results:[{...e.results[0],comments_count:e.results[0].comments_count-1}]}))),i((e=>({...e,results:e.results.filter((e=>e.id!==r))})))}catch(e){}}})]})})},De=a(83),Re=a.n(De);var Te=()=>{const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)(""),[n,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/advertisements/");t(e),o(!0)}catch(e){}})()}),[]),Object(s.useEffect)((()=>{var t;if(n&&null!==e&&void 0!==e&&e.results&&(null===e||void 0===e||null===(t=e.results)||void 0===t?void 0:t.length)>0){const t=Math.floor(Math.random()*e.results.length);c(e.results[t])}}),[e,n]),Object(_.jsx)("div",{className:l.a.Content,children:a&&n?Object(_.jsxs)("div",{children:[Object(_.jsx)(te.a,{className:Re.a.AddImage,src:null===a||void 0===a?void 0:a.image,alt:null===a||void 0===a?void 0:a.alt}),Object(_.jsx)("p",{className:"".concat(Re.a.AddText," text-center mt-5"),children:null===a||void 0===a?void 0:a.description})]}):Object(_.jsx)(R,{spinner:!0})})},Ee=a(48);var He=function(){ae("loggedOut");const{id:e}=Object(de.useParams)(),[t,a]=Object(s.useState)({results:[]}),c=y(),[n,o]=Object(s.useState)({results:[]}),r=S();return Object(s.useEffect)((()=>{(async()=>{try{const[{data:t},{data:s}]=await Promise.all([O.get("/posts/".concat(e,"/")),O.get("comments/?post=".concat(e))]);a({results:[t]}),o(s)}catch(t){}})()}),[e]),Object(_.jsxs)(ee.a,{className:"mt-2",children:[Object(_.jsxs)($.a,{className:"py-2 p-md-1",md:8,children:[Object(_.jsx)(ye,{...t.results[0],setPosts:a,postPage:!0}),Object(_.jsxs)(d.a,{className:"".concat(l.a.Content," ").concat(ue.a.PostText," ").concat(he.a.CommentFormWidth),children:[c&&Object(_.jsx)(Ae,{profile_id:c.profile_id,post:e,setPost:a,setComments:o}),n.results.length?Object(_.jsx)(Ee.a,{children:n.results.map((e=>Object(_.jsx)(Fe,{...e,setPost:a,setComments:o},e.id))),dataLength:n.results.length,loader:Object(_.jsx)(R,{spinner:!0}),hasMore:!!n.next,next:()=>N(n,o)}):c?Object(_.jsx)("span",{children:"No comments yet, be the first to comment."}):Object(_.jsx)("span",{children:"No comments...yet. Log in to comment."})]})]}),!r&&Object(_.jsxs)($.a,{md:4,className:"p-md-2",children:[Object(_.jsx)(M,{}),Object(_.jsx)(Te,{})]})]})};var Ue=function(e){let{message:t,filter:a="",selectedCategory:c=""}=e;const[n,o]=Object(s.useState)({results:[]}),[r,i]=Object(s.useState)(!1),{pathname:j}=Object(de.useLocation)(),m=y(),u=S();return Object(s.useEffect)((()=>{i(!1),(async()=>{try{if(null==m){const{data:e}=await x.a.get("/posts/?".concat(a));o(e)}else{const{data:e}=await O.get("/posts/?".concat(a));o(e)}i(!0)}catch(e){}})()}),[a,j,m]),Object(_.jsxs)(ee.a,{className:"mt-2",children:[Object(_.jsx)($.a,{className:"py-2 p-md-1",md:8,children:r?Object(_.jsx)(_.Fragment,{children:n.results.length?Object(_.jsx)(Ee.a,{children:n.results.map((e=>Object(_.jsx)(ye,{...e,setPosts:o},e.id))),dataLength:n.results.length,loader:Object(_.jsx)(R,{spinner:!0}),hasMore:!!n.next,next:()=>N(n,o)}):Object(_.jsx)(d.a,{className:l.a.Content,children:Object(_.jsx)(R,{message:t})})}):Object(_.jsx)(d.a,{className:l.a.Content,children:Object(_.jsx)(R,{spinner:!0})})}),!u&&Object(_.jsxs)($.a,{md:4,className:"p-md-2",children:[Object(_.jsx)(M,{selectedCategory:c}),Object(_.jsx)(Te,{})]})]})};var Ge=function(){var e,t,a,c;const[n,o]=Object(s.useState)({}),[r,i]=Object(s.useState)(""),[j,m]=Object(s.useState)({content:"",image:"",category:""}),{content:u,image:b,category:h}=j,p=Object(s.useRef)(null),g=Object(v.useHistory)(),{id:f}=Object(de.useParams)(),N=S();Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.a.get("/categories/");i(e)}catch(e){}})()}),[]),Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await O.get("/posts/".concat(f,"/")),{content:t,image:a,category:s,is_owner:c}=e;c?m({content:t,image:a,category:s}):g.push("/")}catch(e){}})()}),[g,f]);const w=Object(_.jsxs)("div",{className:"text-center",children:[Object(_.jsxs)(Z.a.Group,{children:[Object(_.jsx)(Z.a.Label,{htmlFor:"category",children:"Category"}),Object(_.jsxs)(Z.a.Control,{as:"select","aria-label":"tbd",id:"category",onChange:e=>{m({...j,category:e.target.value})},children:[Object(_.jsx)("option",{disabled:!0,children:"Category"}),null===(e=r.results)||void 0===e?void 0:e.map((e=>Object(_.jsxs)("option",{value:e.id,children:[e.name,": ",e.description]},e.id)))]})]}),null===(t=n.category)||void 0===t?void 0:t.map((e=>Object(_.jsx)(X.a,{variant:"warning",children:"You need to choose a category."},e)))]}),C=Object(_.jsxs)("div",{className:"text-center",children:[Object(_.jsxs)(Z.a.Group,{children:[Object(_.jsx)(Z.a.Label,{children:"Content"}),Object(_.jsx)(Z.a.Control,{as:"textarea",rows:4,name:"content",placeholder:"Type your post",value:u,onChange:e=>{m({...j,content:e.target.value})}})]}),null===(a=n.content)||void 0===a?void 0:a.map((e=>Object(_.jsx)(X.a,{variant:"warning",children:"Post has to contain at least some text."},e)))]}),y=Object(_.jsxs)("div",{children:[Object(_.jsxs)(Z.a.Group,{children:[b?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("figure",{children:Object(_.jsx)(te.a,{className:z.a.Image,src:b,rounded:!0})}),Object(_.jsx)("div",{className:"mr-auto text-right",children:Object(_.jsx)(Z.a.Label,{className:"".concat(J.a.Button," btn"),htmlFor:"image-upload",children:"Change the image"})})]}):Object(_.jsx)(Z.a.Label,{className:"".concat(J.a.Button," text-center ").concat(N?ie.a.ButtonRight:J.a.Wide),htmlFor:"image-upload",children:Object(_.jsx)(R,{buttonMessage:"Click or tap to upload an image"})}),Object(_.jsx)(Z.a.File,{id:"image-upload",accept:"image/*",onChange:e=>{e.target.files.length&&(URL.revokeObjectURL(b),m({...j,image:URL.createObjectURL(e.target.files[0])}))},ref:p,hidden:!0})]}),null===(c=n.image)||void 0===c?void 0:c.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t)))]}),P=Object(_.jsxs)("div",{className:"text-right",children:[Object(_.jsx)(K.a,{className:"".concat(J.a.Button," m-2"),onClick:()=>g.goBack(),children:"Cancel"}),Object(_.jsx)(K.a,{className:"".concat(J.a.Button," m-2"),type:"submit",children:"Update"})]});return Object(_.jsx)(Z.a,{onSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("content",u),0!==p.current.files.length&&t.append("image",p.current.files[0]),t.append("category",h);try{const{data:e}=await O.put("/posts/".concat(f,"/"),t);g.push("/posts/".concat(e.id))}catch(c){var a,s;if(401!==(null===(a=c.response)||void 0===a?void 0:a.status))o(null===(s=c.response)||void 0===s?void 0:s.data)}},children:Object(_.jsx)(ee.a,{children:N?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)($.a,{className:"p-0 p-md-2",children:Object(_.jsxs)(d.a,{className:l.a.Content,children:[Object(_.jsx)("div",{children:C}),Object(_.jsx)("div",{children:w}),Object(_.jsx)("div",{className:"p-2",children:y}),Object(_.jsx)("div",{children:P})]})})}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)($.a,{md:8,className:"p-0 p-md-2",children:Object(_.jsxs)(d.a,{className:l.a.Content,children:[Object(_.jsx)("div",{children:C}),Object(_.jsx)("div",{children:w}),Object(_.jsx)("div",{children:P})]})}),Object(_.jsx)($.a,{className:"py-2 p-0 p-md-2",md:4,children:Object(_.jsx)(d.a,{className:"".concat(l.a.Content," ").concat(ie.a.Container),children:Object(_.jsx)("div",{className:"p-2",children:y})})})]})})})},Me=a(60),We=a.n(Me);var qe=function(){const[e,t]=Object(s.useState)(!1),{id:a}=Object(v.useParams)(),[c,n]=Object(s.useState)(),[o,r]=Object(s.useState)({results:[]}),i=y(),[j,m]=Object(s.useState)(),u=S();Object(s.useEffect)((()=>{(async()=>{try{const[e,t]=await Promise.all([x.a.get("/profiles/".concat(a,"/")),x.a.get("posts/?owner__profile=".concat(a))]);n(e.data),r(t.data)}catch(e){}})(),i&&(async()=>{try{const e=await O.get("/profiles/".concat(i.profile_id,"/"));m(e.data)}catch(e){}})(),t(!0)}),[a,null===i||void 0===i?void 0:i.profile_id]);const h=Object(_.jsxs)(_.Fragment,{children:[(null===c||void 0===c?void 0:c.is_owner)&&Object(_.jsx)(Ce,{id:null===c||void 0===c?void 0:c.id}),Object(_.jsxs)(ee.a,{noGutters:!0,className:"text-center ".concat(l.a.Content),children:[Object(_.jsx)($.a,{md:3,className:"mt-1 offset-lg-0",children:Object(_.jsx)(te.a,{className:We.a.ProfileAvatar,roundedCircle:!0,src:null===c||void 0===c?void 0:c.avatar})}),Object(_.jsx)($.a,{md:5,className:"mt-1 align-content-center",children:Object(_.jsx)("h3",{className:We.a.ProfileUsername,children:null===c||void 0===c?void 0:c.owner})}),Object(_.jsx)($.a,{md:2,className:"mt-1 offset-md-2 text-lg-right d-flex justify-content-end pr-3",children:i&&!(null!==c&&void 0!==c&&c.is_owner)&&(null!==c&&void 0!==c&&c.following_id?Object(_.jsx)(K.a,{className:J.a.Button,onClick:async()=>{try{await p.delete("/followers/".concat(c.following_id,"/")),n((e=>({...e,followers_count:c.followers_count-1,following_id:null}))),console.log(j),m((e=>({...e,following_count:j.following_count-1})))}catch(e){}},children:"Unfollow"}):Object(_.jsx)(K.a,{className:J.a.Button,onClick:async()=>{try{const{data:e}=await p.post("/followers/",{followed:c.id});n((t=>({...t,followers_count:c.followers_count+1,following_id:e.id}))),m((e=>({...e,following_count:j.following_count+1})))}catch(e){}},children:"Follow"}))}),Object(_.jsx)($.a,{className:"".concat(We.a.ProfileText," align-content-center"),children:Object(_.jsxs)(ee.a,{className:"justify-content-center no-gutters mt-2",children:[Object(_.jsxs)($.a,{xs:3,className:"pr-4",children:[Object(_.jsx)("div",{children:null===c||void 0===c?void 0:c.posts_count}),Object(_.jsx)("span",{children:"Posts"})]}),Object(_.jsxs)($.a,{xs:3,className:"pr-2",children:[Object(_.jsx)("div",{children:null===c||void 0===c?void 0:c.followers_count}),Object(_.jsx)("span",{children:"Followers"})]}),Object(_.jsxs)($.a,{xs:3,className:"pl-2",children:[Object(_.jsx)("div",{children:null===c||void 0===c?void 0:c.following_count}),Object(_.jsx)("span",{children:"Following"})]}),Object(_.jsxs)($.a,{xs:3,className:"pl-4",children:[Object(_.jsx)("div",{children:null===c||void 0===c?void 0:c.saved_count}),Object(_.jsx)(pe.a,{placement:"top",overlay:Object(_.jsx)(ve.a,{children:"Displays how many times others saved your posts for later!"}),children:Object(_.jsx)("span",{children:"Status"})})]})]})}),Object(_.jsxs)($.a,{xs:12,className:"".concat(We.a.ProfileText," text-left mt-3"),children:[(null===c||void 0===c?void 0:c.name)&&Object(_.jsxs)("div",{children:[Object(_.jsx)("strong",{children:"Name: "}),null===c||void 0===c?void 0:c.name]}),(null===c||void 0===c?void 0:c.bio)&&Object(_.jsxs)("div",{className:"mt-2",children:[Object(_.jsx)("strong",{children:"Bio: "}),null===c||void 0===c?void 0:c.bio]})]})]})]}),g=Object(_.jsx)(_.Fragment,{children:o.results.length?Object(_.jsx)(Ee.a,{children:o.results.map((e=>Object(_.jsx)(ye,{...e,className:l.a.Content,setCurrentPosts:r,profilePage:!0},e.id))),dataLength:o.results.length,loader:Object(_.jsx)(R,{spinner:!0}),hasMore:!!o.next,next:()=>N(o,r)}):Object(_.jsxs)("div",{className:l.a.Content,children:[Object(_.jsx)(R,{message:"".concat(null===c||void 0===c?void 0:c.owner," hasn't posted yet.")}),(null===c||void 0===c?void 0:c.is_owner)&&Object(_.jsx)(b.c,{to:"/posts/create",className:"".concat(J.a.Button," ").concat(J.a.Wide," d-block text-center"),children:"Post something"})]})});return Object(_.jsxs)(ee.a,{className:"mt-2",children:[Object(_.jsx)($.a,{className:"py-2 p-md-1",md:8,children:Object(_.jsx)(d.a,{children:e?Object(_.jsxs)(_.Fragment,{children:[h,u&&Object(_.jsx)(Te,{}),g]}):Object(_.jsx)(R,{spinner:!0})})}),!u&&Object(_.jsxs)($.a,{md:4,className:"p-md-2",children:[Object(_.jsx)(M,{}),Object(_.jsx)(Te,{})]})]})};var Ve=()=>{var e,t;const[a,c]=Object(s.useState)(""),[n,o]=Object(s.useState)({}),r=Object(v.useHistory)(),{id:i}=Object(v.useParams)(),j=y(),m=P();Object(s.useEffect)((()=>{var e;(null===j||void 0===j||null===(e=j.profile_id)||void 0===e?void 0:e.toString())===i?c(j.username):r.push("/")}),[j,r,i]);return Object(_.jsxs)(ee.a,{className:z.a.Row,children:[Object(_.jsx)($.a,{className:"my-auto p-md-2",md:5,children:Object(_.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(_.jsx)("h1",{className:z.a.Header,children:"Change Username"}),Object(_.jsxs)(Z.a,{onSubmit:async e=>{e.preventDefault();try{await p.put("/dj-rest-auth/user/",{username:a}),m((e=>({...e,username:a}))),r.goBack()}catch(s){var t;o(null===(t=s.response)||void 0===t?void 0:t.data)}},children:[Object(_.jsxs)(Z.a.Group,{children:[Object(_.jsx)(Z.a.Label,{children:"Change username"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,placeholder:"username",type:"text",value:a,onChange:e=>c(e.target.value)})]}),null===n||void 0===n||null===(e=n.username)||void 0===e?void 0:e.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsxs)("div",{className:"text-right",children:[Object(_.jsx)(K.a,{className:"".concat(J.a.Button," mr-1"),onClick:()=>r.goBack(),children:"Cancel"}),Object(_.jsx)(K.a,{className:J.a.Button,type:"submit",children:"Save"}),null===n||void 0===n||null===(t=n.non_field_errors)||void 0===t?void 0:t.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",className:"mt-3",children:e},t)))]})]})]})}),Object(_.jsx)($.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(_.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Y})})]})};var ze=()=>{var e,t,a;const c=Object(v.useHistory)(),{id:n}=Object(v.useParams)(),o=y(),[r,i]=Object(s.useState)({new_password1:"",new_password2:""}),{new_password1:j,new_password2:m}=r,[u,b]=Object(s.useState)({}),h=e=>{i({...r,[e.target.name]:e.target.value})};Object(s.useEffect)((()=>{var e;(null===o||void 0===o||null===(e=o.profile_id)||void 0===e?void 0:e.toString())!==n&&c.push("/")}),[o,c,n]);return Object(_.jsxs)(ee.a,{className:z.a.Row,children:[Object(_.jsx)($.a,{className:"my-auto p-md-2",md:5,children:Object(_.jsxs)(d.a,{className:"".concat(l.a.Content," p-4"),children:[Object(_.jsx)("h1",{className:z.a.Header,children:"Change Password"}),Object(_.jsxs)(Z.a,{onSubmit:async e=>{e.preventDefault();try{await p.post("/dj-rest-auth/password/change/",r),c.goBack()}catch(a){var t;b(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(_.jsxs)(Z.a.Group,{controlId:"new_password1",children:[Object(_.jsx)(Z.a.Label,{className:"d-none",children:"New password"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,placeholder:"New password",type:"password",value:j,onChange:h,name:"new_password1"})]}),null===u||void 0===u||null===(e=u.new_password1)||void 0===e?void 0:e.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsxs)(Z.a.Group,{controlId:"new_password2",children:[Object(_.jsx)(Z.a.Label,{className:"d-none",children:"Confirm password"}),Object(_.jsx)(Z.a.Control,{className:z.a.Input,placeholder:"Confirm new password",type:"password",value:m,onChange:h,name:"new_password2"})]}),null===u||void 0===u||null===(t=u.new_password2)||void 0===t?void 0:t.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsxs)("div",{className:"text-right",children:[Object(_.jsx)(K.a,{className:"".concat(J.a.Button," mr-1"),onClick:()=>c.goBack(),children:"Cancel"}),Object(_.jsx)(K.a,{type:"submit",className:"".concat(J.a.Button),children:"Save"}),null===u||void 0===u||null===(a=u.non_field_errors)||void 0===a?void 0:a.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",className:"mt-3",children:e},t)))]})]})]})}),Object(_.jsx)($.a,{md:7,className:"my-auto d-none d-md-block p-2 ".concat(z.a.AuthCol),children:Object(_.jsx)(te.a,{className:"".concat(z.a.Image," ").concat(l.a.Content),src:Y})})]})};var Qe=()=>{var e,t,a;const c=y(),n=P(),{id:o}=Object(v.useParams)(),r=Object(v.useHistory)(),i=Object(s.useRef)(),[j,m]=Object(s.useState)({name:"",bio:"",avatar:""}),{name:u,bio:b,avatar:h}=j,[x,p]=Object(s.useState)({}),g=S();Object(s.useEffect)((()=>{(async()=>{var e;if((null===c||void 0===c||null===(e=c.profile_id)||void 0===e?void 0:e.toString())===o)try{const{data:e}=await O.get("/profiles/".concat(o,"/")),{name:t,bio:a,avatar:s}=e;m({name:t,bio:a,avatar:s})}catch(t){r.push("/")}else r.push("/")})()}),[c,r,o]);const f=e=>{m({...j,[e.target.name]:e.target.value})},N=Object(_.jsxs)(Z.a.Group,{children:[h&&Object(_.jsx)("figure",{children:Object(_.jsx)(te.a,{className:z.a.Image,src:h,fluid:!0})}),null===x||void 0===x||null===(e=x.avatar)||void 0===e?void 0:e.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsx)("div",{className:"mr-auto text-right",children:Object(_.jsx)(Z.a.Label,{className:"".concat(J.a.Button," btn"),htmlFor:"image-upload",children:"Change the image"})}),Object(_.jsx)(Z.a.File,{hidden:!0,id:"image-upload",ref:i,accept:"image/*",onChange:e=>{e.target.files.length&&m({...j,avatar:URL.createObjectURL(e.target.files[0])})}})]}),w=Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(Z.a.Group,{children:[Object(_.jsx)(Z.a.Label,{children:"Your name"}),Object(_.jsx)(Z.a.Control,{as:"textarea",value:u,placeholder:"Your name",rows:1,name:"name",onChange:f})]}),null===x||void 0===x||null===(t=x.name)||void 0===t?void 0:t.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t))),Object(_.jsxs)(Z.a.Group,{children:[Object(_.jsx)(Z.a.Label,{children:"Your bio"}),Object(_.jsx)(Z.a.Control,{as:"textarea",value:b,placeholder:"Your bio",name:"bio",rows:4,onChange:f})]}),null===x||void 0===x||null===(a=x.bio)||void 0===a?void 0:a.map(((e,t)=>Object(_.jsx)(X.a,{variant:"warning",children:e},t)))]}),C=Object(_.jsxs)("div",{className:"text-right",children:[Object(_.jsx)(K.a,{className:"".concat(J.a.Button," m-2"),onClick:()=>r.goBack(),children:"Cancel"}),Object(_.jsx)(K.a,{className:"".concat(J.a.Button," m-2"),type:"submit",children:"Post"})]});return Object(_.jsx)(Z.a,{onSubmit:async e=>{var t;e.preventDefault();const a=new FormData;var s;(a.append("name",u),a.append("bio",b),null!==i&&void 0!==i&&null!==(t=i.current)&&void 0!==t&&t.files[0])&&a.append("avatar",null===i||void 0===i||null===(s=i.current)||void 0===s?void 0:s.files[0]);try{const{data:e}=await O.put("/profiles/".concat(o,"/"),a);n((t=>({...t,profile_avatar:e.avatar}))),r.goBack()}catch(l){var c;p(null===(c=l.response)||void 0===c?void 0:c.data)}},children:Object(_.jsx)(ee.a,{children:g?Object(_.jsx)($.a,{className:"p-0 p-md-2",children:Object(_.jsxs)(d.a,{className:l.a.Content,children:[Object(_.jsx)("div",{children:w}),Object(_.jsx)("div",{children:N}),Object(_.jsx)("div",{children:C})]})}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)($.a,{md:8,className:"p-0 p-md-2",children:Object(_.jsxs)(d.a,{className:l.a.Content,children:[Object(_.jsx)("div",{children:w}),Object(_.jsx)("div",{children:C})]})}),Object(_.jsx)($.a,{className:"py-2 p-0 p-md-2",md:4,children:Object(_.jsx)(d.a,{className:"".concat(l.a.Content," ").concat(ie.a.Container),children:Object(_.jsx)("div",{className:"p-2",children:N})})})]})})})};var Je=function(){const e=y(),t=Object(s.useContext)(H),a=(null===e||void 0===e?void 0:e.profile_id)||"";return Object(_.jsxs)("div",{className:l.a.App,children:[Object(_.jsx)(q,{}),Object(_.jsx)(d.a,{className:l.a.Main,children:Object(_.jsxs)(v.Switch,{children:[Object(_.jsx)(v.Route,{className:l.a.Content,exact:!0,path:"/",render:()=>Object(_.jsx)(Ue,{message:"No posts found."})}),Object(_.jsx)(v.Route,{exact:!0,path:"/feed",render:()=>Object(_.jsx)(Ue,{message:"No posts found. Follow a user to change that.",filter:"owner__followed__owner__profile=".concat(a,"&")})}),Object(_.jsx)(v.Route,{exact:!0,path:"/liked",render:()=>Object(_.jsx)(Ue,{message:"No posts found. Like some posts to change that.",filter:"likes__owner__profile=".concat(a,"&ordering=-likes__created&")})}),Object(_.jsx)(v.Route,{exact:!0,path:"/saved",render:()=>Object(_.jsx)(Ue,{message:"No posts found. Save some post for later and find them here later.",filter:"saved__owner__profile=".concat(a,"&ordering=-saved__created&")})}),Object(_.jsx)(v.Route,{exact:!0,path:"/categories/:id/posts",render:()=>Object(_.jsx)(Ue,{message:"No posts in this category.",filter:"category_id=".concat(t,"&ordering=-created&"),selectedCategory:t})}),Object(_.jsx)(v.Route,{exact:!0,path:"/login",render:()=>Object(_.jsx)(ce,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/register",render:()=>Object(_.jsx)(se,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/posts/create",render:()=>Object(_.jsx)(je,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/posts/:id/edit",render:()=>Object(_.jsx)(Ge,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/posts/:id",render:()=>Object(_.jsx)(He,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/profiles/:id",render:()=>Object(_.jsx)(qe,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/profiles/:id/edit/username",render:()=>Object(_.jsx)(Ve,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/profiles/:id/edit/password",render:()=>Object(_.jsx)(ze,{})}),Object(_.jsx)(v.Route,{exact:!0,path:"/profiles/:id/edit",render:()=>Object(_.jsx)(Qe,{})}),Object(_.jsx)(v.Route,{render:()=>Object(_.jsx)(re,{})})]})})]})};var Ye=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,138)).then((t=>{let{getCLS:a,getFID:s,getFCP:c,getLCP:n,getTTFB:o}=t;a(e),s(e),c(e),n(e),o(e)}))};o.a.render(Object(_.jsx)(b.a,{children:Object(_.jsx)(k,{children:Object(_.jsx)(G,{children:Object(_.jsx)(Je,{})})})}),document.getElementById("root")),Ye()},21:function(e,t,a){e.exports={NavBar:"NavBar_NavBar__1amC6",NavLink:"NavBar_NavLink__34ons",Active:"NavBar_Active__3PBZb",Brand:"NavBar_Brand__iWmt7",NavLinkOffset:"NavBar_NavLinkOffset__1pQTu"}},22:function(e,t,a){e.exports={Post:"Post_Post__3UScv",ProfilePost:"Post_ProfilePost__1yVdX",PostHeader:"Post_PostHeader__3M--4",PostText:"Post_PostText__3e2Ye",PostNotLiked:"Post_PostNotLiked__CtevJ",CommentIcon:"Post_CommentIcon__2ee-h",PostNotSaved:"Post_PostNotSaved__Nuenh",IconText:"Post_IconText__YMwZV",PostLiked:"Post_PostLiked__2q-fO",PostSaved:"Post_PostSaved__3fzAk",Category:"Post_Category__3sIbT",PostImage:"Post_PostImage__1ZuuZ",OwnerLinkIcon:"Post_OwnerLinkIcon__mURmr"}},33:function(e,t,a){e.exports={DropdownItem:"Dropdowns_DropdownItem__3dbO9",DropdownBackground:"Dropdowns_DropdownBackground__1ejJx",DropdownIcon:"Dropdowns_DropdownIcon__2sva1",Absolute:"Dropdowns_Absolute__3M8sS"}},39:function(e,t,a){e.exports={Container:"PostCreateEditForm_Container__2WHuV",ButtonRight:"PostCreateEditForm_ButtonRight__31el0"}},59:function(e,t,a){e.exports={Commenter:"Comment_Commenter__jS4-t",ModifiedDate:"Comment_ModifiedDate__2xZBi",CommentDisplay:"Comment_CommentDisplay__3-tKw",MediaBody:"Comment_MediaBody__3_Oi6"}},60:function(e,t,a){e.exports={ProfileAvatar:"ProfilePage_ProfileAvatar__2KT7F",ProfileUsername:"ProfilePage_ProfileUsername__zUlMb",ProfileText:"ProfilePage_ProfileText__3KIBm"}},69:function(e,t,a){e.exports={CommentHeight:"CommentCreateEditForm_CommentHeight__3splU"}},73:function(e,t,a){e.exports={Asset:"Asset_Asset__1dBcX",ProfileText:"Asset_ProfileText__2yoNB",ButtonText:"Asset_ButtonText__3P132"}},74:function(e,t,a){e.exports={Header:"PopularCategories_Header__209lK",CategoryName:"PopularCategories_CategoryName__5QzJb",CategoryContainer:"PopularCategories_CategoryContainer__1Bzfo"}},81:function(e,t,a){e.exports={Avatar:"Avatar_Avatar__196lW",Username:"Avatar_Username__3u3zc"}},82:function(e,t,a){e.exports={Filter:"PageNotFound_Filter__21tbr",Subheader:"PageNotFound_Subheader__y_PYS"}},83:function(e,t,a){e.exports={AddImage:"Adds_AddImage__3CCcO",AddText:"Adds_AddText__208_5"}},97:function(e,t,a){e.exports={CommentFormWidth:"PostPage_CommentFormWidth__2vEMG"}}},[[133,1,2]]]);
//# sourceMappingURL=main.abd5e7f2.chunk.js.map